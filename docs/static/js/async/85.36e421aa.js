/*! For license information please see 85.36e421aa.js.LICENSE.txt */
(self.webpackChunkrspress_doc_template=self.webpackChunkrspress_doc_template||[]).push([["85"],{55157:function(e,n,s){"use strict";s.r(n),s.d(n,{default:function(){return h}});var a=s("85893"),i=s("47423");function r(e){let n=Object.assign({h1:"h1",a:"a",p:"p",ol:"ol",li:"li",h2:"h2",ul:"ul",h3:"h3",img:"img",strong:"strong",h4:"h4",span:"span",math:"math",semantics:"semantics",mrow:"mrow",mn:"mn",mo:"mo",mi:"mi",annotation:"annotation",code:"code",blockquote:"blockquote"},(0,i.useMDXComponents)(),e.components);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.h1,{id:"more-than-capacity-performance-oriented-evolution-of-pangu-in-alibaba",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#more-than-capacity-performance-oriented-evolution-of-pangu-in-alibaba",children:"#"}),"More Than Capacity: Performance-oriented Evolution of Pangu in Alibaba"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"https://www.usenix.org/conference/fast23/presentation/li-qiang-deployed",target:"_blank",rel:"noopener noreferrer",children:"More Than Capacity: Performance-oriented Evolution of Pangu in Alibaba"})}),"\n",(0,a.jsxs)(n.h1,{id:"\u6458\u8981",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u6458\u8981",children:"#"}),"\u6458\u8981"]}),"\n",(0,a.jsx)(n.p,{children:"\u672C\u6587\u4ECB\u7ECD\u4E86\u76D8\u53E4\u5B58\u50A8\u7CFB\u7EDF\u5982\u4F55\u968F\u7740\u786C\u4EF6\u6280\u672F\u7684\u53D1\u5C55\u548C\u5546\u4E1A\u6A21\u5F0F\u7684\u53D8\u5316\u8FDB\u884C\u6F14\u8FDB\uFF0C\u4EE5\u63D0\u4F9B\u9AD8\u6027\u80FD\u3001\u9AD8\u53EF\u7528\u7684\u5B58\u50A8\u670D\u52A1\u3002IO \u5EF6\u8FDF\u8FBE\u5230 100us \u7684\u6C34\u5E73\u3002\n\u53D1\u5C55\u5206\u4E3A\u4E24\u9636\u6BB5\uFF1A"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"\u8FCE\u63A5 SSD \u548C RDMA\uFF0C\u5927\u5E45\u964D\u4F4E io \u5EF6\u8FDF\uFF0C\u63D0\u4F9B\u9AD8\u541E\u5410\u9AD8 iops"}),"\n",(0,a.jsxs)(n.li,{children:["\u5BB9\u91CF\u5BFC\u5411\u8F6C\u53D8\u4E3A\u6027\u80FD\u5BFC\u5411","\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"\u4F7F\u7528\u66F4\u5927\u7684 ssd"}),"\n",(0,a.jsx)(n.li,{children:"RDMA 25GbE \u5347\u7EA7\u4E3A 100GbE"}),"\n",(0,a.jsxs)(n.li,{children:["\u5F15\u5165\u4E86\u4E00\u7CFB\u5217\u5173\u952E\u8BBE\u8BA1\uFF1A","\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"\u51CF\u5C11\u6D41\u91CF\u653E\u5927"}),"\n",(0,a.jsx)(n.li,{children:"\u8FDC\u7A0B\u7F13\u5B58\u76F4\u63A5\u8BBF\u95EE"}),"\n",(0,a.jsx)(n.li,{children:"CPU \u8BA1\u7B97\u5378\u8F7D"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.h2,{id:"\u7B80\u4ECB",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u7B80\u4ECB",children:"#"}),"\u7B80\u4ECB"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"\u627F\u8F7D\u963F\u91CC\u6838\u5FC3\u4E1A\u52A1\uFF08\u7535\u5546\u3001\u652F\u4ED8\uFF09"}),"\n",(0,a.jsx)(n.li,{children:"\u4E07\u4EBF\u6587\u4EF6\u3001EB \u7EA7\u522B\u5BB9\u91CF"}),"\n"]}),"\n",(0,a.jsxs)(n.h3,{id:"\u76D8\u53E4-10\u9762\u5411\u5BB9\u91CF",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u76D8\u53E4-10\u9762\u5411\u5BB9\u91CF",children:"#"}),"\u76D8\u53E4 1.0\uFF1A\u9762\u5411\u5BB9\u91CF"]}),"\n",(0,a.jsx)(n.p,{children:"2009-2015\nHDD\uFF0C\u5EF6\u8FDF\u6BEB\u79D2\u7EA7\n\u7F51\u7EDC\uFF0CGbps \u7EA7\u522B\n\u76D8\u53E4 1.0 \u57FA\u4E8E ext4 \u548C\u5185\u6838\u6001 TCP\n\u6027\u80FD\u8FBE\u5230\u4E86 HDD \u548C Gbps \u7F51\u7EDC\u7684\u6781\u9650\n\u7528\u6237\u6B64\u65F6\u5173\u6CE8\u4E8E\u83B7\u5F97\u5927\u91CF\u7A7A\u95F4\uFF0C\u800C\u4E0D\u662F\u9AD8\u6027\u80FD"}),"\n",(0,a.jsxs)(n.h2,{id:"\u76D8\u53E4-20",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u76D8\u53E4-20",children:"#"}),"\u76D8\u53E4 2.0"]}),"\n",(0,a.jsx)(n.p,{children:"2015 \u5F00\u59CB\uFF0C\u5F00\u53D1\u76D8\u53E4 2.0\n\u76EE\u6807\uFF1A\u63D0\u4F9B\u9AD8\u6027\u80FD\u5B58\u50A8\u670D\u52A1\n\u5EF6\u8FDF 100us \u7EA7\u522B\n\u89C2\u5BDF\u5230\uFF1A"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"\u76D8\u53E4 1.0 \u4E2D\u4F7F\u7528\u7684\u591A\u79CD\u6587\u4EF6\u7C7B\u578B\uFF0C\u7279\u522B\u662F\u5141\u8BB8\u968F\u673A\u8BBF\u95EE\u7684\u6587\u4EF6\u7C7B\u578B\u5728 ssd \u4E0A\u8868\u73B0\u4E0D\u4F73\u3002ssd \u53EF\u4EE5\u5728\u987A\u5E8F\u64CD\u4F5C\u4E0A\u5B9E\u73B0\u9AD8\u541E\u5410\u548C iops"}),"\n",(0,a.jsx)(n.li,{children:"\u7531\u4E8E\u6570\u636E\u590D\u5236\u548C\u9891\u7E41\u4E2D\u65AD\uFF0C\u5185\u6838\u7A7A\u95F4\u8F6F\u4EF6\u6808\u65E0\u6CD5\u8DDF\u4E0A ssd \u548C rdma \u7684\u9AD8 iops \u548C\u4F4E\u5EF6\u8FDF"}),"\n",(0,a.jsxs)(n.li,{children:["the paradigm shift from [[\u5B66\u4E60/server-centric datacenter architectures]] to [[\u5B66\u4E60/resource-disaggregated datacenter]] architectures poses additional challenges to achieving low I/O latency","\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"\u6570\u636E\u4E2D\u5FC3\u67B6\u6784\u53D1\u751F\u8F6C\u53D8\uFF1A\u4EE5\u670D\u52A1\u5668\u4E3A\u4E2D\u5FC3 -> \u8D44\u6E90\u5206\u79BB\u7684\u6570\u636E\u4E2D\u5FC3\u67B6\u6784"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.h3,{id:"\u7B2C\u4E00\u9636\u6BB5",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u7B2C\u4E00\u9636\u6BB5",children:"#"}),"\u7B2C\u4E00\u9636\u6BB5"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"\u8BBE\u8BA1\u4E86\u4E00\u4E2A\u7EDF\u4E00\u7684\uFF0Cappend-only \u7684\u6301\u4E45\u5316\u5C42"}),"\n",(0,a.jsxs)(n.li,{children:["\u5F15\u5165\u81EA\u5305\u542B\u5206\u5757\u5E03\u5C40 (a self-contained chunk layout)","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"\u4EE5\u964D\u4F4E\u6587\u4EF6\u5199\u5165\u7684 io \u5EF6\u8FDF"}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\u8BBE\u8BA1\u4E86\u4E00\u4E2A\u7528\u6237\u7A7A\u95F4\u7684\u5B58\u50A8\u64CD\u4F5C\u7CFB\u7EDF USSOS","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"run-to-completion \u7684\u7EBF\u7A0B\u6A21\u578B\uFF0C\u5B9E\u73B0\u7528\u6237\u7A7A\u95F4\u5B58\u50A8\u6808\u548C\u7528\u6237\u7A7A\u95F4\u7F51\u7EDC\u6808\u4E4B\u95F4\u7684\u9AD8\u6548\u534F\u4F5C"}),"\n",(0,a.jsx)(n.li,{children:"\u7528\u6237\u7A7A\u95F4\u7684\u8C03\u5EA6\u673A\u5236\uFF0C\u5B9E\u73B0\u8DB3\u591F\u7684 CPU \u548C\u5185\u5B58\u8D44\u6E90\u5206\u914D"}),"\n",(0,a.jsx)(n.li,{children:"\u52A8\u6001 SLA \u4FDD\u8BC1\u673A\u5236\n\u5B9E\u73B0 P 999 \u6BEB\u79D2\u7EA7 io \u5EF6\u8FDF"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.h2,{id:"\u7B2C\u4E8C\u9636\u6BB5",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u7B2C\u4E8C\u9636\u6BB5",children:"#"}),"\u7B2C\u4E8C\u9636\u6BB5"]}),"\n",(0,a.jsx)(n.p,{children:"\u9002\u5E94\u4EE5\u6027\u80FD\u4E3A\u5BFC\u5411\u7684\u5546\u4E1A\u6A21\u5F0F\uFF0C\u8FDB\u884C\u57FA\u7840\u8BBE\u65BD\u66F4\u65B0\uFF0C\u7A81\u7834\u7F51\u7EDC/\u5185\u5B58/CPU \u74F6\u9888\n2018 \u4EE5\u6765\uFF0C\u8D8A\u6765\u8D8A\u591A\u7684\u4F01\u4E1A\u5C06\u4E1A\u52A1\u8F6C\u79FB\u5230\u963F\u91CC\u4E91\uFF0C\u4ED6\u4EEC\u5BF9\u5B58\u50A8\u6027\u80FD\u548C\u5EF6\u8FDF\u6709\u4E25\u683C\u8981\u6C42\u3002\n\u65B0\u51A0\u4EE5\u6765\u8F6C\u53D8\u66F4\u5FEB\u3002\n\u6CBF\u7740\u57FA\u4E8E clos \u7684\u62D3\u6251\uFF08\u5982 [[\u5B66\u4E60/FatTree]] \u7ED3\u6784\uFF09\u7528\u539F\u6709\u7684\u670D\u52A1\u5668\u548C\u4EA4\u6362\u673A\u6269\u5C55\u4E0D\u591F\u7ECF\u6D4E\uFF1A\u9AD8\u603B\u6210\u672C\uFF08\u7A7A\u95F4\u3001\u7535\u529B\u3001\u51B7\u5374\u3001\u52B3\u52A8\u529B\uFF09\uFF0C\u9AD8\u73AF\u5883\u6210\u672C\uFF08\u78B3\u6392\u653E\uFF09\u3002\u56E0\u6B64\u76D8\u53E4\u5F00\u53D1\u4E86\u5185\u90E8\u7684\u9AD8\u5BB9\u91CF\u5B58\u50A8\u670D\u52A1\u5668\uFF08\u6BCF\u53F0 96TB SSD\uFF09\uFF0C25GbE \u5347\u7EA7\u5230 100GbE\u3002\n\u63D0\u51FA\u4E00\u7CFB\u5217\u6280\u672F\u5E94\u5BF9\u6027\u80FD\u74F6\u9888\uFF0C\u5145\u5206\u5229\u7528\u8D44\u6E90\uFF1A"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"\u964D\u4F4E\u7F51\u7EDC\u6D41\u91CF\u653E\u5927\u7387\uFF0C\u52A8\u6001\u8C03\u6574\u6D41\u91CF\u4F18\u5148\u7EA7"}),"\n",(0,a.jsxs)(n.li,{children:["RDCA\uFF1A\u8FDC\u7A0B\u76F4\u63A5\u7F13\u5B58\u8BBF\u95EE\u5E94\u5BF9[[\u5B66\u4E60/\u5185\u5B58\u74F6\u9888]]","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"\u6D88\u9664\u5E8F\u5217\u5316\u53CD\u5E8F\u5217\u5316"}),"\n",(0,a.jsx)(n.li,{children:"\u5F15\u5165 CPU wait \u6307\u4EE4\uFF0C\u5728\u8D85\u7EBF\u7A0B\u95F4\u540C\u6B65\u89E3\u51B3 CPU \u74F6\u9888"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.h2,{id:"\u5C0F\u7ED3",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u5C0F\u7ED3",children:"#"}),"\u5C0F\u7ED3"]}),"\n",(0,a.jsx)(n.p,{children:"\u4E00\u9636\u6BB5\u7ED3\u675F\u65F6\uFF0C\u76D8\u53E4 2.0 \u6210\u529F\u652F\u6301\u5F39\u6027 SSD \u5757\u5B58\u50A8\u670D\u52A1\uFF0C\u5EF6\u8FDF\u5728 100us \u7EA7\u522B\uFF0Ciops \u4E00\u767E\u4E07\u30022018 \u53CC\u5341\u4E00\uFF0C\u76D8\u53E4 2.0 \u652F\u6301\u963F\u91CC\u6570\u636E\u5E93\u5EF6\u8FDF\u4E3A 280us\u3002\u5BF9\u4E8E OTS \u5B58\u50A8\uFF0C\u4ED6\u5728\u76D8\u53E4 2.0 \u4E2D\u7684\u5EF6\u8FDF\u6BD4\u5728 1.0 \u4E2D\u4F4E\u4E00\u4E2A\u6570\u636E\u7EA7\u3002\u5199\u5BC6\u96C6\u670D\u52A1\uFF08\u5982 EBS \u4E91\u76D8\uFF09\uFF0CP 999 \u7684\u5EF6\u8FDF\u5C0F\u4E8E 1ms\u3002\u5BF9\u4E8E\u8BFB\u5BC6\u96C6\u578B\u670D\u52A1\uFF08\u5728\u7EBF\u641C\u7D22\uFF09\uFF0CP 999 \u4F4E\u4E8E 11ms\u3002\n\u7B2C\u4E8C\u9636\u6BB5\uFF0C\u7F51\u7EDC\u4ECE 2 x 25 Gbps \u5347\u7EA7\u5230 2 x 100 Gbps\uFF0C\u7A81\u7834\u4E86\u7F51\u7EDC\u5185\u5B58\u548C CPU \u7684\u74F6\u9888\uFF0C\u6BCF\u53F0 taishan \u5B58\u50A8\u670D\u52A1\u5668\uFF08normalize\uFF09\u541E\u5410\u589E\u52A0 6.1 \u500D\u3002"}),"\n",(0,a.jsxs)(n.h1,{id:"\u80CC\u666F",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u80CC\u666F",children:"#"}),"\u80CC\u666F"]}),"\n",(0,a.jsxs)(n.h2,{id:"\u76D8\u53E4\u7684\u6982\u8FF0",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u76D8\u53E4\u7684\u6982\u8FF0",children:"#"}),"\u76D8\u53E4\u7684\u6982\u8FF0"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"/assets/Pasted%20image%2020230425201456.png",alt:""})}),"\n",(0,a.jsx)(n.p,{children:"\u7531 Pangu Core\u3001Pangu Service\u3001Pangu Monitoring System \u7EC4\u6210\uFF0C\u901A\u8FC7\u9AD8\u901F\u7F51\u7EDC\u76F8\u4E92\u8FDE\u63A5\u3002"}),"\n",(0,a.jsx)(n.p,{children:"Pangu Core\uFF1A\u63D0\u4F9B\u4E86 append-only \u6301\u4E45\u5316\u8BED\u4E49\u3002"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"client\uFF1Aheavyweight client\uFF0C\u4E3A service \u63D0\u4F9B SDK\uFF0C\u63A5\u6536\u6587\u4EF6\u8BF7\u6C42\uFF0C\u4E0E master \u548C chunkserver \u901A\u4FE1\u54CD\u5E94\u8BF7\u6C42\u3002\u5B9E\u73B0\u526F\u672C\u7BA1\u7406\u3001SLA \u4FDD\u8BC1\u3001\u6570\u636E\u4E00\u81F4\u6027\u3002"}),"\n",(0,a.jsxs)(n.li,{children:["master\uFF1A\u5143\u6570\u636E\u670D\u52A1\uFF0C\u57FA\u4E8E Raft\u3002","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"\u5206\u89E3\u4E3A\u4E24\u4E2A\u670D\u52A1\uFF0Cnamespace \u670D\u52A1\u548C stream meta \u670D\u52A1\u3002stream \u662F\u4E00\u7EC4\u5757\u7684\u62BD\u8C61\u3002\u8FD9\u4E24\u4E2A\u670D\u52A1\u901A\u8FC7\u76EE\u5F55\u6811\u5212\u5206\u5143\u6570\u636E\uFF08\u5B9E\u73B0\u5143\u6570\u636E\u5C40\u90E8\u5316\uFF09\u3001\u4F7F\u7528 hashing \u5B9E\u73B0\u8D1F\u8F7D\u5747\u8861\u3002namespace \u670D\u52A1\u63D0\u4F9B\u6587\u4EF6\u4FE1\u606F\uFF08\u76EE\u5F55\u6811\u3001namespace\uFF08\u5E94\u8BE5\u662F\u591A\u79DF\u6237\u7684\u6982\u5FF5\uFF1F\uFF09\uFF09\uFF0Cstream meta \u63D0\u4F9B\u6587\u4EF6\u5230 chunks \u7684\u6620\u5C04\uFF08\u6BD4\u5982 chunk \u7684\u4F4D\u7F6E\uFF09\u3002"}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["chunkserver\uFF1A\u4EE5 chunk \u5F62\u5F0F\u5B58\u50A8\u6570\u636E\uFF0C\u914D\u5907\u4E00\u4E2A\u7528\u6237\u7A7A\u95F4\u5B58\u50A8\u7CFB\u7EDF USSFS","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["USSFS \u4E3A\u4E0D\u540C\u786C\u4EF6\u63D0\u4F9B\u9AD8\u6027\u80FD\u3001append-only \u7684\u5B58\u50A8\u5F15\u64CE","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"\u6BD4\u5982\u7528\u4E8E\u53E0\u74E6\u76D8\u7684 SMRstore"}),"\n",(0,a.jsx)(n.li,{children:"\u76D8\u53E4 2.0 \u4E00\u9636\u6BB5\u4E2D\uFF0C\u6BCF\u4E2A\u6587\u4EF6\u4E09\u526F\u672C\uFF0C\u540E\u6765\u5F15\u5165\u5783\u573E\u6536\u96C6 GCworker\uFF0CEC \u5B58\u50A8\u6587\u4EF6"}),"\n",(0,a.jsx)(n.li,{children:"\u76D8\u53E4 2.0 \u4E8C\u9636\u6BB5\u4E2D\uFF0C\u5173\u952E\u4E1A\u52A1\u4F7F\u7528 EC \u53D6\u4EE3\u4E09\u526F\u672C\uFF0C\u964D\u4F4E\u6D41\u91CF\u653E\u5927\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"\u57FA\u4E8E Pangu Core\uFF0C\u63D0\u4F9B\u4F20\u7EDF\u7684\u4E91\u5B58\u50A8\u670D\u52A1\uFF08EBS\u3001OSS\u3001NAS\uFF09\uFF0C\u4EE5\u53CA\u9762\u5411\u4E91\u7684\u6587\u4EF6\u7CFB\u7EDF Fisc\u3002"}),"\n",(0,a.jsx)(n.p,{children:"Pangu Monitoring System\uFF08\u76D1\u63A7\u7CFB\u7EDF\uFF09"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"\u6BD4\u5982 Perseus \u4E3A Pango core \u548C Pangu service \u63D0\u4F9B\u5B9E\u65F6\u76D1\u63A7\uFF0C\u548C AI \u8F85\u52A9\u7684 root cause \u5206\u6790\u670D\u52A1"}),"\n"]}),"\n",(0,a.jsxs)(n.h2,{id:"\u8BBE\u8BA1\u76EE\u6807",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u8BBE\u8BA1\u76EE\u6807",children:"#"}),"\u8BBE\u8BA1\u76EE\u6807"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\u4F4E\u5EF6\u8FDF","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"\u5E73\u5747 100us"}),"\n",(0,a.jsx)(n.li,{children:"\u5373\u4F7F\u6709\u7F51\u7EDC\u6296\u52A8\u548C\u670D\u52A1\u5668\u6545\u969C\u4E5F\u63D0\u4F9B ms \u7EA7\u522B P999 SLA"}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.li,{children:"\u9AD8\u541E\u5410\uFF1A\u5403\u6EE1\u786C\u4EF6"}),"\n",(0,a.jsxs)(n.li,{children:["\u7EDF\u4E00\u7684\u9AD8\u6027\u80FD\u5E95\u5EA7\n",(0,a.jsx)(n.img,{src:"/assets/Pasted%20image%2020230425203321.png",alt:""})]}),"\n"]}),"\n",(0,a.jsxs)(n.h2,{id:"\u9636\u6BB5\u4E00",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u9636\u6BB5\u4E00",children:"#"}),"\u9636\u6BB5\u4E00"]}),"\n",(0,a.jsxs)(n.h3,{id:"append-only-fs",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#append-only-fs",children:"#"}),"Append-only fs"]}),"\n",(0,a.jsx)(n.p,{children:"\u76D8\u53E4\u7684\u6301\u4E45\u5C42\u63D0\u4F9B\u4E86\u4E0E\u76D8\u53E4\u6240\u6709\u5B58\u50A8\u670D\u52A1\uFF08\u5982 EBS\u3001OSS \u548C NAS\uFF09\u7684\u63A5\u53E3\u3002\n\u5728\u76D8\u53E4\u7684\u65E9\u671F\u5F00\u53D1\u4E2D\uFF0C\u6301\u4E45\u5C42\u4E3A\u4E0D\u540C\u7684\u5B58\u50A8\u670D\u52A1\u63D0\u4F9B\u4E0D\u540C\u7684\u63A5\u53E3\u3002\n\u4F8B\u5982\uFF1A\u5B83\u4E3A\u4F4E\u5EF6\u8FDF\u7684 NAS \u670D\u52A1\u63D0\u4F9B LogFile \u63A5\u53E3\uFF0C\u4E3A\u9AD8\u541E\u5410\u91CF\u7684 Maxcompute \u6570\u636E\u5206\u6790\u670D\u52A1\u63D0\u4F9B TempFile \u63A5\u53E3\u3002\n\u7136\u800C\uFF0C\u8FD9\u79CD\u8BBE\u8BA1\u5E26\u6765\u4E86\u5927\u91CF\u7684\u5F00\u53D1\u548C\u7BA1\u7406\u7684\u590D\u6742\u6027\u3002\u5177\u4F53\u6765\u8BF4\uFF0C\u5BF9\u4E8E\u6BCF\u4E00\u4E2A\u5B58\u50A8\u670D\u52A1\uFF0C\u76D8\u53E4\u7684\u5F00\u53D1\u4EBA\u5458\u90FD\u5FC5\u987B\u8BBE\u8BA1\u548C\u5B9E\u73B0\u4E00\u4E2A\u65B0\u7684\u63A5\u53E3\u3002\u8FD9\u662F\u4E00\u4E2A\u590D\u6742\u7684\u3001\u52B3\u52A8\u5BC6\u96C6\u578B\u7684\u3001\u5BB9\u6613\u51FA\u9519\u7684\u8FC7\u7A0B\u3002\n\u4E3A\u4E86\u7B80\u5316\u5F00\u53D1\u548C\u7BA1\u7406\uFF0C\u5F15\u5165\u4E86\u7EDF\u4E00\u7684\u6587\u4EF6\u7C7B\u578B\uFF1AFlatLogFile\n\u76D8\u53E4\u7684\u5F00\u53D1\u8005\u5FC5\u987B\u786E\u4FDD\u901A\u8FC7 FlatLogFile \u8FDB\u884C\u7684\u6570\u636E\u64CD\u4F5C\uFF0C\u5C24\u5176\u662F\u5199\u64CD\u4F5C\uFF0C\u80FD\u591F\u5728\u5B58\u50A8\u4ECB\u8D28\u4E0A\u9AD8\u6548\u3001\u53EF\u9760\u5730\u6267\u884C\u3002\u56E0\u6B64\uFF0C\u6240\u6709\u7684\u7684\u5347\u7EA7\u548C\u6539\u53D8\u5BF9\u76D8\u53E4\u7684\u5F00\u53D1\u8005\u6765\u8BF4\u662F\u900F\u660E\u7684\u3002\u50A8\u5B58\u670D\u52A1\u7684\u5347\u7EA7\u548C\u6539\u53D8\u5BF9\u76D8\u53E4\u5F00\u53D1\u4EBA\u5458\u6765\u8BF4\u662F\u900F\u660E\u7684\uFF0C\u8FD9\u5927\u5927\u7B80\u5316\u4E86\u76D8\u53E4\u7684\u5F00\u53D1\u4E30\u5BCC\u4E86\u76D8\u53E4\u7684\u5F00\u53D1\u548C\u7BA1\u7406\u3002\n\u4E3A\u4E86\u786E\u4FDD\u901A\u8FC7 FlatLogFile \u8FDB\u884C\u7684\u6570\u636E\u64CD\u4F5C\u80FD\u591F\u5728 SSD \u4E0A\u6709\u6548\u6267\u884C\uFF0C\u6211\u4EEC\u5BF9 FlatLogFile \u7684\u987A\u5E8F\u64CD\u4F5C\u8FDB\u884C\u4E86\u5BF9\u9F50\u4EE5\u5B9E\u73B0\u9AD8\u6027\u80FD\u3002"}),"\n",(0,a.jsxs)(n.h3,{id:"heavyweight-client",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#heavyweight-client",children:"#"}),"Heavyweight Client"]}),"\n",(0,a.jsx)(n.p,{children:"\u4ECE master \u83B7\u5F97 chunk \u4FE1\u606F\uFF0Cclient \u8D1F\u8D23\u8FDB\u884C\u590D\u5236\u6216\u8005 EC\u3002Client \u5B9E\u73B0\u91CD\u8BD5\u673A\u5236\uFF0C\u5E94\u5BF9\u5076\u5C14\u51FA\u73B0\u7684\u6296\u52A8\uFF08\u6BD4\u5982\u7F51\u7EDC\u4E22\u5305\uFF09\u3002\u8FD8\u5B9E\u73B0\u4E86\u63A2\u6D4B\u673A\u5236\uFF0C\u5B9A\u671F\u4ECE\u4E3B\u63A7\u83B7\u5F97\u6700\u65B0\u7684 chunkserver \u72B6\u6001\uFF0C\u8BC4\u4F30 chunkserver \u7684\u670D\u52A1\u8D28\u91CF\u3002"}),"\n",(0,a.jsxs)(n.h3,{id:"append-only-chunk-\u7BA1\u7406",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#append-only-chunk-\u7BA1\u7406",children:"#"}),"Append-only chunk \u7BA1\u7406"]}),"\n",(0,a.jsxs)(n.p,{children:["\u5178\u578B\u7684\u6587\u4EF6\u7CFB\u7EDF\uFF08\u6BD4\u5982 ext4\uFF09\u5C06\u6587\u4EF6\u5B58\u50A8\u5728\u5757\u4E2D\uFF0C\u4E00\u4E2A\u6587\u4EF6\u548C\u4ED6\u7684\u5143\u6570\u636E\u662F\u901A\u8FC7\u4E24\u6B21\u5199\u5165\u5206\u522B\u5199\u5165\u5B58\u50A8\u4ECB\u8D28\u7684\uFF0C\u589E\u52A0\u4E86\u5199\u5165\u5EF6\u8FDF\uFF0C\u7F29\u77ED\u4E86 SSD \u5BFF\u547D\u3002\n\u4E3A\u4E86\u89E3\u51B3\u8FD9\u4E2A\u95EE\u9898\uFF0Cpangu \u5728 chunkserver \u4E0A\u4EE5 chunks \u7684\u5F62\u5F0F\u5B58\u50A8\u6587\u4EF6\u3002\u6BCF\u4E2A chunk \u5B58\u50A8\u6570\u636E\u548C\u81EA\u5DF1\u7684\u5143\u6570\u636E\u3002\u56E0\u6B64\uFF0C\u4E00\u4E2A chunk \u901A\u8FC7\u4E00\u6B21\u64CD\u4F5C\uFF08\u800C\u4E0D\u662F\u4E24\u6B21\uFF09\u5199\u5165\u5B58\u50A8\u4ECB\u8D28\uFF0C\u5927\u5927\u964D\u4F4E\u5199\u5165\u5EF6\u8FDF\uFF0C\u63D0\u9AD8\u4E86\u5B58\u50A8\u4ECB\u8D28\u5BFF\u547D\u3002\n",(0,a.jsx)(n.img,{src:"/assets/Pasted%20image%2020230425204520.png",alt:""}),"\n\u4E00\u4E2A chunk \u5305\u62EC\u591A\u4E2A sector unit\u3002\u6BCF\u4E2A sector unit \u5305\u62EC\uFF1Adata\u3001padding\u3001footer\u3002\nFooter \u5B58\u50A8 chunk \u5143\u6570\u636E\uFF1Achunk id\u3001len\u3001CRC\u3002\n\u72EC\u7ACB\u7684\u5206\u5757\u5E03\u5C40\u5141\u8BB8 chunkserver \u80FD\u591F\u4ECE\u6545\u969C\u4E2D\u81EA\u884C\u6062\u590D\u3002\n\u5177\u4F53\u6765\u8BF4\uFF0C\u5F53 client \u5C06\u8FDE\u7EED\u7684\u72EC\u7ACB\u5757\u5199\u5165\u5B58\u50A8\u4ECB\u8D28\u65F6\uFF0Cchunkserver \u5728",(0,a.jsx)(n.strong,{children:"\u5185\u5B58"}),"\u4E2D\u5B58\u50A8\u8FD9\u4E9B chunk \u7684\u5143\u6570\u636E\u526F\u672C\uFF0C\u5E76\u5B9A\u671F\u5C06\u8FD9\u4E9B\u5B58\u5230\u5B58\u50A8\u4ECB\u8D28\u4E0A\u8FDB\u884C checkpoint\u3002\n\u5F53\u6545\u969C\u53D1\u751F\u5E76\u5BFC\u81F4\u4E00\u4E9B\u672A\u5B8C\u6210\u7684\u5199\u5165\u65F6\uFF0Cchunkserver \u4F1A\u4ECE checkpoint \u4E2D\u52A0\u8F7D\u5143\u6570\u636E\u5E76\u4E0E\u4E4B\u8FDB\u884C\u6BD4\u8F83\u3002\u5982\u679C\u5B58\u5728\u5DEE\u5F02\uFF0Cchunkserver \u4F1A\u68C0\u67E5 chunks \u7684 CRC \u4EE5\u6062\u590D\u5230\u6700\u65B0\u7684\u6B63\u786E\u72B6\u6001\u3002"]}),"\n",(0,a.jsxs)(n.h3,{id:"\u5143\u6570\u636E\u64CD\u4F5C\u4F18\u5316",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u5143\u6570\u636E\u64CD\u4F5C\u4F18\u5316",children:"#"}),"\u5143\u6570\u636E\u64CD\u4F5C\u4F18\u5316"]}),"\n",(0,a.jsx)(n.p,{children:"master namespace \u670D\u52A1\u8D1F\u8D23\u76EE\u5F55\u6811\u548C\u6587\u4EF6\u7BA1\u7406\u3002\nstream \u670D\u52A1\u8D1F\u8D23 chunk \u4FE1\u606F\u3002stream \u662F\u4E00\u7EC4 chunk \u7684\u62BD\u8C61\u6982\u5FF5\u3002\u540C\u4E00 stream \u4E2D\u7684 chunk \u5C5E\u4E8E\u540C\u4E00\u4E2A\u6587\u4EF6\u3002"}),"\n",(0,a.jsxs)(n.h4,{id:"\u5E76\u884C\u5316",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u5E76\u884C\u5316",children:"#"}),"\u5E76\u884C\u5316"]}),"\n",(0,a.jsx)(n.p,{children:"\u9AD8\u5185\u805A\u7684\u5143\u6570\u636E\u4F1A\u88AB\u6620\u5C04\u5230\u4E0D\u540C\u7684\u5143\u6570\u636E\u670D\u52A1\u5668\u3002\n\u5B83\u8FD8\u4F7F\u7528\u4E86\u4E00\u79CD\u65B0\u7684\u6570\u636E\u7ED3\u6784\uFF1A\u652F\u6301\u53EF\u9884\u6D4B\u7684\u76EE\u5F55 ID\uFF0C\u5E76\u5141\u8BB8\u5BA2\u6237\u7AEF\u9AD8\u6548\u5730\u5E76\u884C\u6267\u884C\u8DEF\u5F84\u89E3\u6790\u3002"}),"\n",(0,a.jsx)(n.p,{children:"\u8FD8\u6709\u51E0\u79CD\u6280\u672F\u53EF\u4EE5\u52A0\u5FEB client \u4ECE stream \u670D\u52A1\u68C0\u7D22 chunk \u7684\u65B9\u5F0F\u3002"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\u957F\u5EA6\u53EF\u53D8\u7684 big chunk\u3002big chunk \u7684\u597D\u5904\uFF1A\u964D\u4F4E\u5143\u6570\u636E\u7684\u91CF\uFF0C\u907F\u514D client \u9891\u7E41\u8BF7\u6C42 big chunk \u9020\u6210\u7684\u4E0D\u5FC5\u8981 io \u5EF6\u8FDF\uFF0C\u6709\u52A9\u4E8E\u63D0\u9AD8 SSD \u5BFF\u547D\u3002\u7136\u800C\uFF0C\u7B80\u5355\u7684\u589E\u52A0 chunk \u5927\u5C0F\u4F1A\u589E\u52A0\u788E\u7247\u5316\u7684\u98CE\u9669\uFF08\u60F3\u60F3 ZBS NFS \u91CC\u7684\u5C0F\u6587\u4EF6\uFF0C\u4E00\u4E2A 47B \u6587\u4EF6\u5360\u7528 256M \u903B\u8F91\u7A7A\u95F4\uFF09\u3002\u56E0\u6B64\u5F15\u5165\u4E86\u53EF\u53D8\u957F chunk\uFF081MB~2GB\uFF09\u3002\u964D\u4F4E\u4E86\u788E\u7247\u5316\u7684\u6982\u7387\uFF0C\u5E76\u4E14\u4FDD\u6301\u4E0E pangu1.0 \u7684\u517C\u5BB9\u6027\u3002","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"EBS \u670D\u52A1\u7684\u5206\u5757\u5927\u5C0F\u6709 P95 \u4E3A 64 MB\uFF0CP99 \u7684\u91CF\u5316\u4E3A 286.4 MB"}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.li,{children:"Client \u7AEF\u7F13\u5B58 chunk \u4FE1\u606F\u3002\u6BCF\u4E2A\u5BA2\u6237\u7AEF\u6709\u4E00\u4E2A\u672C\u5730\u5143\u6570\u636E\u7F13\u5B58\u6C60\uFF0C\u51CF\u5C11\u5143\u6570\u636E\u67E5\u8BE2\u8BF7\u6C42\u6570\u91CF\u3002\u7F13\u5B58\u6C60\u57FA\u4E8E LRU\u3002\u5F53\u4E00\u4E2A service \u60F3\u8981\u8BBF\u95EE\u6570\u636E\u65F6\uFF0Cclient \u9996\u5148\u67E5\u8BE2\u672C\u5730\u7684\u5143\u6570\u636E\u7F13\u5B58\u3002\u5F53\u7F13\u5B58\u672A\u547D\u4E2D\uFF0C\u6216\u8005\u7F13\u5B58\u547D\u4E2D\u4F46\u662F chunkserver \u63D0\u793A\u5143\u6570\u636E\u5DF2\u8FC7\u671F\uFF08\u5982\u7531\u4E8E\u526F\u672C\u8FC1\u79FB\uFF09\uFF0Cclient \u4F1A\u5411 master \u53D1\u51FA\u8BF7\u6C42\u83B7\u5F97\u6700\u65B0\u7684\u5143\u6570\u636E\u3002"}),"\n",(0,a.jsx)(n.li,{children:"Chunk \u4FE1\u606F\u8BF7\u6C42\u7684\u6279\u91CF\u5316\uFF08batching\uFF09\u3002client \u5728\u5F88\u77ED\u7684\u65F6\u95F4\u5185\u6C47\u603B\u591A\u4E2A chunk \u4FE1\u606F\u8BF7\u6C42\uFF0C\u6279\u91CF\u53D1\u9001\u7ED9 master\uFF0C\u63D0\u9AD8\u67E5\u8BE2\u6548\u7387\u3002master \u5E76\u884C\u5904\u7406\u6210\u6279\u7684\u8BF7\u6C42\uFF0C\u6C47\u603B\u7ED3\u679C\u53D1\u56DE client\u3002"}),"\n",(0,a.jsx)(n.li,{children:"\u8D2A\u5A6A\u7684 chunk \u4FE1\u606F\u9884\u53D6\uFF08prefetching\uFF09\u3002\u5F53 master \u6536\u5230\u8BFB\u53D6\u8BF7\u6C42\u65F6\uFF0C\u4F1A\u7ED9 client \u8FD4\u56DE\u76F8\u5173 chunk \u548C\u5176\u4ED6 chunk \u7684\u5143\u6570\u636E\u3002\u5F53 master \u6536\u5230\u5199\u8BF7\u6C42\u65F6\uFF0C\u4F1A\u8FD4\u56DE\u66F4\u591A\u7684 chunkserver \u6765\u54CD\u5E94\u3002\u5982\u679C\u9047\u5230\u5199\u5165\u5F02\u5E38\uFF0C\u53EF\u4EE5\u5728\u4E0D\u8BF7\u6C42\u7684\u60C5\u51B5\u4E0B\u5207\u6362 chunkserver\u3002"}),"\n",(0,a.jsx)(n.li,{children:"\u6570\u636E\u634E\u5E26\uFF0C\u964D\u4F4E\u4E00\u4E2A RTT\u3002client \u4ECE master \u68C0\u7D22\u5230 chunk \u5730\u5740\u540E\uFF0C\u5C06 chunk create \u8BF7\u6C42\u548C\u5199\u5165\u6570\u636E\u5408\u5E76\u4E3A\u4E00\u4E2A\u8BF7\u6C42\uFF0C\u5E76\u53D1\u9001\u7ED9 chunkserver\u3002"}),"\n"]}),"\n",(0,a.jsxs)(n.h3,{id:"chunkserver-ussos",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#chunkserver-ussos",children:"#"}),"Chunkserver USSOS"]}),"\n",(0,a.jsx)(n.p,{children:"\u575A\u6301\u901A\u8FC7\u5185\u6838\u7A7A\u95F4\u8FDB\u884C\u6570\u636E\u64CD\u4F5C\u7684\u4F20\u7EDF\u8BBE\u8BA1\u662F\u4F4E\u6548\u7684\uFF1A\u5BFC\u81F4\u9891\u7E41\u7684\u7CFB\u7EDF\u4E2D\u65AD\u6D88\u8017 CPU \u8D44\u6E90\u3001\u5BFC\u81F4\u7528\u6237\u7A7A\u95F4\u548C\u5185\u6838\u7A7A\u95F4\u4E4B\u95F4\u4E0D\u5FC5\u8981\u7684\u6570\u636E\u91CD\u590D\uFF08memory copy\uFF09\n\u4E3A\u4E86\u5E94\u5BF9\u8FD9\u4E9B\u95EE\u9898\uFF0C\u6211\u4EEC bypass kernel\uFF0C\u4E3A chunkserver \u5F00\u53D1\u4E00\u4E2A\u9AD8\u6027\u80FD\u7684 userspace \u5B58\u50A8\u64CD\u4F5C\u7CFB\u7EDF\u3002"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"\u8BBE\u5907\u7BA1\u7406"}),"\n",(0,a.jsx)(n.li,{children:"run-to-completion \u73B0\u6210\u6A21\u578B"}),"\n",(0,a.jsx)(n.li,{children:"\u7528\u6237\u7EA7\u5185\u5B58\u7BA1\u7406"}),"\n",(0,a.jsx)(n.li,{children:"\u7528\u6237\u7A7A\u95F4\u8C03\u5EA6"}),"\n",(0,a.jsx)(n.li,{children:"\u4E3A SSD \u5B9A\u5236\u7684 USSFS"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"USSOS \u57FA\u4E8E RDMA\u3001DPDK\u3001SPDK \u5EFA\u7ACB\uFF0C\u4F46\u8D85\u8D8A\u5E76\u7EDF\u4E00\u4E86\u7F51\u7EDC\u6808\u548C\u5B58\u50A8\u6808\u3002\n\u5728\u4F20\u7EDF\u7684\u7BA1\u9053\u7EBF\u7A0B\u6A21\u578B\u4E2D\uFF0C\u4E00\u4E2A\u8BF7\u6C42\u88AB\u5206\u89E3\u6210\u5404\u4E2A\u9636\u6BB5\uFF0C\u6BCF\u4E2A\u9636\u6BB5\u5728\u4E00\u4E2A\u7EBF\u7A0B\u4E0A\u8FD0\u884C\u3002\u76F8\u53CD\uFF0C\u5728 USSOS \u4E2D\uFF0C\u8BF7\u6C42\u4ECE\u5934\u5230\u5C3E\u90FD\u5728\u4E00\u4E2A\u7EBF\u7A0B\u4E0A\u8FD0\u884C\uFF0C\u5728\u8FD0\u884C\u5230\u5B8C\u6210\u7684\u6A21\u578B\u4E2D\uFF0C\u51CF\u5C11\u4E86\u7531\u4E0A\u4E0B\u6587\u5207\u6362\u3001\u7EBF\u7A0B\u95F4\u901A\u4FE1\u548C\u7EBF\u7A0B\u95F4\u540C\u6B65\u5F15\u8D77\u7684\u5F00\u9500\u3002"}),"\n",(0,a.jsxs)(n.h3,{id:"\u5185\u5B58\u7BA1\u7406",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u5185\u5B58\u7BA1\u7406",children:"#"}),"\u5185\u5B58\u7BA1\u7406"]}),"\n",(0,a.jsx)(n.p,{children:"\u5173\u4E8E\u5171\u4EAB\u5185\u5B58\u7684\u5DE5\u4F5C\u6709\uFF1Avhost\u3001shmipc\n\u5176\u6B21\uFF0C\u7EBF\u7A0B\u8BF7\u6C42\u4E00\u4E2A\u5DE8\u5927\u7684\u5185\u5B58\u7A7A\u95F4\uFF0C\u4F5C\u4E3A\u7F51\u7EDC\u5DE5\u4F5C\u548C\u5B58\u50A8\u6808\u4E4B\u95F4\u7684\u5171\u4EAB\u5185\u5B58\u3002\u5177\u4F53\u6765\u8BF4\uFF0C\u4ECE\u7F51\u7EDC\u6536\u5230\u7684\u6570\u636E\u901A\u8FC7 RDMA \u534F\u8BAE\u5B58\u50A8\u5728\u5171\u4EAB hugepage\u3002\u5728\u53D1\u9001 hugepage \u7684\u5143\u6570\u636E\uFF08addr\u3001size\uFF09\u540E\uFF0C\u53EF\u4EE5\u901A\u8FC7 SPDK \u76F4\u63A5\u4ECE hugepage \u5199\u5165\u5B58\u50A8\u4ECB\u8D28\u3002\u8FD9\u6837\u5C31\u5B9E\u73B0\u4E86\u7F51\u7EDC\u5230\u5B58\u50A8\u7684\u96F6\u62F7\u8D1D\u3002\u901A\u8FC7 io \u6570\u636E\u7684 user-level share hugepage\uFF0C\u4E0D\u540C\u89D2\u8272\uFF08\u6BD4\u5982 chunkserver \u548C GCworker\uFF09\u4E4B\u95F4\u7684\u6570\u636E\u4F20\u8F93\u4E5F\u53EF\u4EE5\u5B9E\u73B0\u96F6\u62F7\u8D1D\u3002"}),"\n",(0,a.jsxs)(n.h3,{id:"cpu-\u8C03\u5EA6",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#cpu-\u8C03\u5EA6",children:"#"}),"CPU \u8C03\u5EA6"]}),"\n",(0,a.jsx)(n.p,{children:"\u9632\u6B62\u4E00\u4E2A\u4EFB\u52A1\u963B\u585E\u540E\u9762\u7684\u4EFB\u52A1\u3002\u6BCF\u4E2A chunkserver \u6709\u56FA\u5B9A\u6570\u91CF\u7684\u5DE5\u4F5C\u7EBF\u7A0B\u3002\u5206\u914D\u7ED9\u540C\u4E00\u5DE5\u4F5C\u7EBF\u7A0B\u7684\u8BF7\u6C42\u4EE5 fifo \u987A\u5E8F\u6267\u884C\u3002\u56E0\u6B64\u5BF9\u4E8E\u4E00\u4E2A\u7ED9\u5B9A\u7684\u8BF7\u6C42\uFF0C\u5982\u679C\u4E00\u4E2A\u4EFB\u52A1\u9700\u8981\u592A\u591A\u7684\u65F6\u95F4\uFF08\u8868\u67E5\u8BE2\uFF0C\u8868\u641C\u7D22\u3001\u904D\u5386\u3001\u5185\u5B58\u5206\u914D\u3001\u76D1\u63A7\u548C\u7EDF\u8BA1\uFF09\uFF0C\u4ED6\u5C06\u5360\u7528\u8D44\u6E90\u5E76\u4E14\u963B\u6B62\u540E\u7EED\u4EFB\u52A1\uFF0C\u964D\u4F4E\u4E86\u8BF7\u6C42\u7684\u6027\u80FD\uFF0C\u4F7F\u5F97\u5176\u4ED6\u8BF7\u6C42\u5904\u4E8E\u9965\u997F\u72B6\u6001\u3002\u5BF9\u4E8E heavy task\uFF0C\u5F15\u5165\u4E86\u5FC3\u8DF3\u673A\u5236\u6765\u76D1\u63A7\u4EFB\u52A1\u7684\u8FD0\u884C\u65F6\u95F4\u5E76\u8BBE\u7F6E\u60C5\u62A5\u3002\u5982\u679C\u4E00\u4E2A\u4EFB\u52A1\u7684\u65F6\u95F4\u7247\u7528\u5B8C\u4E86\uFF0C\u4F1A\u88AB\u653E\u5230\u540E\u53F0\u7EBF\u7A0B\u4E2D\uFF0C\u4ECE critical path \u4E2D\u79FB\u9664\u3002\u5BF9\u4E8E system overhead\uFF0C\u4F7F\u7528 tcmalloc \u7F13\u5B58\uFF0C\u8BA9\u9AD8\u9891\u64CD\u4F5C\u5728\u7F13\u5B58\u4E2D\u5B8C\u6210\u3002\n\u4F18\u5148\u7EA7\u8C03\u5EA6\uFF0C\u4FDD\u8BC1\u9AD8 QoS\u3002\u4E0D\u540C\u7684\u8BF7\u6C42\u6709\u4E0D\u540C\u7684 qos \u76EE\u6807\uFF08\u7528\u6237\u8BF7\u6C42\uFF1A\u9AD8\u4F18\u5148\u7EA7\uFF0CGC\uFF1A\u4F4E\u4F18\u5148\u7EA7\uFF09\u3002\u7136\u800C\u4E00\u4E2A\u4F4E\u4F18\u5148\u7EA7\u7684\u8BF7\u6C42\u53EF\u80FD\u4F1A block \u540E\u6765\u7684\u9AD8\u4F18\u5148\u7EA7\u8BF7\u6C42\uFF0C\u5E76\u4E14\u7531\u540C\u4E00\u4E2A worker thread \u6267\u884C\u3002\u56E0\u6B64\u5F88\u96BE\u4FDD\u8BC1\u4E00\u4E2A\u9AD8\u4F18\u5148\u7EA7\u7684\u8BF7\u6C42\u603B\u662F\u80FD\u4F18\u5148\u6267\u884C\u3002USSOS \u6709\u4E00\u4E2A\u4F18\u5148\u7EA7\u961F\u5217\uFF0C\u4EFB\u52A1\u6839\u636E qos \u76EE\u6807\u653E\u5165\u76F8\u5E94\u7684\u4F18\u5148\u7EA7\u961F\u5217\u3002\npolling \u548C eventloop \u7684\u5207\u6362\uFF08NAPI\uFF09\u3002NIC \u63D0\u4F9B\u4E00\u4E2A fd\uFF0C\u901A\u8FC7 fd \u4E8B\u4EF6\u901A\u77E5\u5E94\u7528\u7A0B\u5E8F\u7684\u6570\u636E\u5230\u8FBE\u3002app \u9ED8\u8BA4\u5904\u4E8E\u4E8B\u4EF6\u9A71\u52A8\uFF0C\u6536\u5230 nic \u7684\u901A\u77E5\u5207\u6362\u5230 polling \u6A21\u5F0F\u3002\u5982\u679C\u4E00\u6BB5\u65F6\u95F4\u5185\u6CA1\u6709\u6536\u5230\u4EFB\u4F55 io \u8BF7\u6C42\uFF0C\u5207\u6362\u56DE\u4E8B\u4EF6\u9A71\u52A8\u6A21\u5F0F\u3002"}),"\n",(0,a.jsxs)(n.h3,{id:"append-only-ussfs",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#append-only-ussfs",children:"#"}),"Append-only USSFS"]}),"\n",(0,a.jsx)(n.p,{children:"\u901A\u8FC7 FlatLogFile \u7684 append-only \u8BED\u4E49\uFF0C USSFS \u652F\u6301 append-only \u5199\u5165\uFF0C\u5E76\u63D0\u4F9B\u4E00\u5957\u57FA\u4E8E\u5757\u7684\u8BED\u4E49\uFF0C\u5982 open, close, seal, format, read, append \u800C\u4E0D\u662F\u50CF Ext 4\u90A3\n\u6837\u7684\u6807\u51C6 POSIX \u8BED\u4E49\u3002\n\u91C7\u7528\u4E0D\u540C\u673A\u5236\u6700\u5927\u5316 SSD \u6027\u80FD\uFF1A"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"self-contained chunk\uFF1A\u964D\u4F4E\u6570\u636E\u64CD\u4F5C\u7684\u6B21\u6570"}),"\n",(0,a.jsx)(n.li,{children:"\u4E0D\u50CF ext4 \u5728 inode \u548C file dir \u4E4B\u95F4\u5EFA\u7ACB\u5C42\u6B21\u5173\u7CFB\uFF0C\u800C\u662F\u6240\u6709\u5BF9\u6587\u4EF6\u7684\u64CD\u4F5C\u90FD\u8BB0\u5F55\u5728 log \u6587\u4EF6\u4E2D\uFF0C\u5143\u6570\u636E\u5728 mount \u65F6\u901A\u8FC7 replay log \u6765\u5EFA\u7ACB\u3002"}),"\n",(0,a.jsx)(n.li,{children:"polling\u3002"}),"\n"]}),"\n",(0,a.jsxs)(n.h3,{id:"\u9AD8\u6027\u80FD\u9AD8\u53EF\u7528",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u9AD8\u6027\u80FD\u9AD8\u53EF\u7528",children:"#"}),"\u9AD8\u6027\u80FD\u9AD8\u53EF\u7528"]}),"\n",(0,a.jsxs)(n.h4,{id:"chasing",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#chasing",children:"#"}),"Chasing"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"/assets/Pasted%20image%2020230425214713.png",alt:""})}),"\n",(0,a.jsxs)(n.p,{children:["\u5176\u4E2D\uFF0C",(0,a.jsxs)(n.span,{className:"katex",children:[(0,a.jsx)(n.span,{className:"katex-mathml",children:(0,a.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(n.semantics,{children:[(0,a.jsxs)(n.mrow,{children:[(0,a.jsx)(n.mn,{children:"2"}),(0,a.jsx)(n.mo,{children:"\u22C5"}),(0,a.jsx)(n.mi,{children:"M"}),(0,a.jsx)(n.mi,{children:"i"}),(0,a.jsx)(n.mi,{children:"n"}),(0,a.jsx)(n.mi,{children:"C"}),(0,a.jsx)(n.mi,{children:"o"}),(0,a.jsx)(n.mi,{children:"p"}),(0,a.jsx)(n.mi,{children:"y"}),(0,a.jsx)(n.mo,{children:">"}),(0,a.jsx)(n.mi,{children:"M"}),(0,a.jsx)(n.mi,{children:"a"}),(0,a.jsx)(n.mi,{children:"x"}),(0,a.jsx)(n.mi,{children:"C"}),(0,a.jsx)(n.mi,{children:"o"}),(0,a.jsx)(n.mi,{children:"p"}),(0,a.jsx)(n.mi,{children:"y"})]}),(0,a.jsx)(n.annotation,{encoding:"application/x-tex",children:"2 \\cdot MinCopy > MaxCopy"})]})})}),(0,a.jsxs)(n.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(n.span,{className:"base",children:[(0,a.jsx)(n.span,{className:"strut",style:{height:"0.6444em"}}),(0,a.jsx)(n.span,{className:"mord",children:"2"}),(0,a.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(n.span,{className:"mbin",children:"\u22C5"}),(0,a.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,a.jsxs)(n.span,{className:"base",children:[(0,a.jsx)(n.span,{className:"strut",style:{height:"0.8778em",verticalAlign:"-0.1944em"}}),(0,a.jsx)(n.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"M"}),(0,a.jsx)(n.span,{className:"mord mathnormal",children:"in"}),(0,a.jsx)(n.span,{className:"mord mathnormal",style:{marginRight:"0.07153em"},children:"C"}),(0,a.jsx)(n.span,{className:"mord mathnormal",children:"o"}),(0,a.jsx)(n.span,{className:"mord mathnormal",children:"p"}),(0,a.jsx)(n.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"y"}),(0,a.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(n.span,{className:"mrel",children:">"}),(0,a.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(n.span,{className:"base",children:[(0,a.jsx)(n.span,{className:"strut",style:{height:"0.8778em",verticalAlign:"-0.1944em"}}),(0,a.jsx)(n.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"M"}),(0,a.jsx)(n.span,{className:"mord mathnormal",children:"a"}),(0,a.jsx)(n.span,{className:"mord mathnormal",children:"x"}),(0,a.jsx)(n.span,{className:"mord mathnormal",style:{marginRight:"0.07153em"},children:"C"}),(0,a.jsx)(n.span,{className:"mord mathnormal",children:"o"}),(0,a.jsx)(n.span,{className:"mord mathnormal",children:"p"}),(0,a.jsx)(n.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"y"})]})]})]}),"\n\u6BD4\u5982\u4E09\u526F\u672C\u5199\u5165\u4E24\u526F\u672C\u5C31\u53EF\u4EE5\u8FD4\u56DE\u6210\u529F\u3002\u8003\u8651\u8FD9\u6837\u7684\u60C5\u51B5 ",(0,a.jsx)(n.code,{children:"[1 2 3]"}),"\uFF0C",(0,a.jsx)(n.code,{children:"[1 2]"})," \u8FD4\u56DE\u6210\u529F\uFF0C",(0,a.jsx)(n.code,{children:"[3]"})," \u5728 ",(0,a.jsxs)(n.span,{className:"katex",children:[(0,a.jsx)(n.span,{className:"katex-mathml",children:(0,a.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(n.semantics,{children:[(0,a.jsx)(n.mrow,{children:(0,a.jsx)(n.mi,{children:"T"})}),(0,a.jsx)(n.annotation,{encoding:"application/x-tex",children:"T"})]})})}),(0,a.jsx)(n.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(n.span,{className:"base",children:[(0,a.jsx)(n.span,{className:"strut",style:{height:"0.6833em"}}),(0,a.jsx)(n.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"T"})]})})]})," \u65F6\u6CA1\u6709\u8FD4\u56DE\u6210\u529F\u3002Client \u5411\u4E0A\u5C42\u8FD4\u56DE\u6210\u529F\uFF0C\u5E76\u4E14\u5728\u5185\u5B58\u4E2D\u4FDD\u7559 chunk\uFF0C\u7B49\u5F85\u53E6\u4E00\u4E2A\u6BEB\u79D2\u7EA7\u7684 ",(0,a.jsxs)(n.span,{className:"katex",children:[(0,a.jsx)(n.span,{className:"katex-mathml",children:(0,a.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(n.semantics,{children:[(0,a.jsx)(n.mrow,{children:(0,a.jsx)(n.mi,{children:"t"})}),(0,a.jsx)(n.annotation,{encoding:"application/x-tex",children:"t"})]})})}),(0,a.jsx)(n.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(n.span,{className:"base",children:[(0,a.jsx)(n.span,{className:"strut",style:{height:"0.6151em"}}),(0,a.jsx)(n.span,{className:"mord mathnormal",children:"t"})]})})]}),"\uFF08\u6765\u81EA\u7ECF\u9A8C\u503C\uFF09\u3002\u5982\u679C 3 \u5728 ",(0,a.jsxs)(n.span,{className:"katex",children:[(0,a.jsx)(n.span,{className:"katex-mathml",children:(0,a.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(n.semantics,{children:[(0,a.jsxs)(n.mrow,{children:[(0,a.jsx)(n.mi,{children:"T"}),(0,a.jsx)(n.mo,{children:"+"}),(0,a.jsx)(n.mi,{children:"t"})]}),(0,a.jsx)(n.annotation,{encoding:"application/x-tex",children:"T+t"})]})})}),(0,a.jsxs)(n.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(n.span,{className:"base",children:[(0,a.jsx)(n.span,{className:"strut",style:{height:"0.7667em",verticalAlign:"-0.0833em"}}),(0,a.jsx)(n.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"T"}),(0,a.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(n.span,{className:"mbin",children:"+"}),(0,a.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,a.jsxs)(n.span,{className:"base",children:[(0,a.jsx)(n.span,{className:"strut",style:{height:"0.6151em"}}),(0,a.jsx)(n.span,{className:"mord mathnormal",children:"t"})]})]})]})," \u80FD\u8FD4\u56DE\u6210\u529F\uFF0Cclient \u91CA\u653E\u6389\u5185\u5B58\u4E2D\u7684 chunk\u3002\u5982\u679C 3 \u6CA1\u80FD\u5B8C\u6210\u5199\u5165\uFF0C\u4F46\u662F\u6CA1\u6709\u5B8C\u6210\u7684\u90E8\u5206\u5C0F\u4E8E\u53E6\u4E00\u4E2A\u7ECF\u9A8C\u503C ",(0,a.jsxs)(n.span,{className:"katex",children:[(0,a.jsx)(n.span,{className:"katex-mathml",children:(0,a.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(n.semantics,{children:[(0,a.jsx)(n.mrow,{children:(0,a.jsx)(n.mi,{children:"k"})}),(0,a.jsx)(n.annotation,{encoding:"application/x-tex",children:"k"})]})})}),(0,a.jsx)(n.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(n.span,{className:"base",children:[(0,a.jsx)(n.span,{className:"strut",style:{height:"0.6944em"}}),(0,a.jsx)(n.span,{className:"mord mathnormal",style:{marginRight:"0.03148em"},children:"k"})]})})]}),"\uFF0Cclient \u5BF9 3 \u53D1\u8D77\u91CD\u8BD5\u3002\u5982\u679C\u5927\u4E8E ",(0,a.jsxs)(n.span,{className:"katex",children:[(0,a.jsx)(n.span,{className:"katex-mathml",children:(0,a.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(n.semantics,{children:[(0,a.jsx)(n.mrow,{children:(0,a.jsx)(n.mi,{children:"k"})}),(0,a.jsx)(n.annotation,{encoding:"application/x-tex",children:"k"})]})})}),(0,a.jsx)(n.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(n.span,{className:"base",children:[(0,a.jsx)(n.span,{className:"strut",style:{height:"0.6944em"}}),(0,a.jsx)(n.span,{className:"mord mathnormal",style:{marginRight:"0.03148em"},children:"k"})]})})]}),"\uFF0Cclient \u4F1A\u5C01\u5B58\u8FD9\u4E2A chunk\uFF0C\u4EE5\u4FBF\u8FD9\u4E2A chunk \u4E0D\u4F1A\u6709\u540E\u7EED\u7684 append\uFF0C\u7136\u540E client \u901A\u77E5 master\uFF0Cmaster \u5C06\u4ECE ",(0,a.jsx)(n.code,{children:"[1 2]"})," \u5BF9 3 \u8FDB\u884C\u6570\u636E\u7684\u590D\u5236\uFF0C\u786E\u4FDD\u6700\u7EC8\u6709\u4E09\u526F\u672C\u3002\n\u5728\u8C28\u614E\u9009\u62E9 ",(0,a.jsxs)(n.span,{className:"katex",children:[(0,a.jsx)(n.span,{className:"katex-mathml",children:(0,a.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(n.semantics,{children:[(0,a.jsx)(n.mrow,{children:(0,a.jsx)(n.mi,{children:"t"})}),(0,a.jsx)(n.annotation,{encoding:"application/x-tex",children:"t"})]})})}),(0,a.jsx)(n.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(n.span,{className:"base",children:[(0,a.jsx)(n.span,{className:"strut",style:{height:"0.6151em"}}),(0,a.jsx)(n.span,{className:"mord mathnormal",children:"t"})]})})]})," \u548C ",(0,a.jsxs)(n.span,{className:"katex",children:[(0,a.jsx)(n.span,{className:"katex-mathml",children:(0,a.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(n.semantics,{children:[(0,a.jsx)(n.mrow,{children:(0,a.jsx)(n.mi,{children:"k"})}),(0,a.jsx)(n.annotation,{encoding:"application/x-tex",children:"k"})]})})}),(0,a.jsx)(n.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(n.span,{className:"base",children:[(0,a.jsx)(n.span,{className:"strut",style:{height:"0.6944em"}}),(0,a.jsx)(n.span,{className:"mord mathnormal",style:{marginRight:"0.03148em"},children:"k"})]})})]})," \u7684\u60C5\u51B5\u4E0B\uFF0Cchasing \u5927\u5927\u51CF\u4F4E\u4E86\u957F\u5C3E\u5199\u5EF6\u8FDF\uFF0C\u5E76\u4E14\u4E0D\u4F1A\u589E\u52A0\u6570\u636E\u4E22\u5931\u7684\u98CE\u9669\u3002\u5177\u4F53\u6765\u8BF4\uFF0C\u4EE5 MaxCopy=3 \u7684\u60C5\u51B5\u4E3A\u4F8B\uFF0C\u5728\u4E24\u4E2A\u526F\u672C\u6210\u529F\u5730\u5B8C\u5168\u5199\u5165 chunkservers \u540E\uFF0C\u7CFB\u7EDF\u4E2D\u6709\u4E09\u4E2A\u526F\u672C\uFF0C\u800C\u7B2C\u4E09\u4E2A\u526F\u672C\u5728\u5BA2\u6237\u7AEF\u7684\u5185\u5B58\u4E2D\u3002\u5728 ",(0,a.jsxs)(n.span,{className:"katex",children:[(0,a.jsx)(n.span,{className:"katex-mathml",children:(0,a.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(n.semantics,{children:[(0,a.jsxs)(n.mrow,{children:[(0,a.jsx)(n.mo,{stretchy:"false",children:"["}),(0,a.jsx)(n.mi,{children:"T"}),(0,a.jsx)(n.mo,{separator:"true",children:","}),(0,a.jsx)(n.mi,{children:"T"}),(0,a.jsx)(n.mo,{children:"+"}),(0,a.jsx)(n.mi,{children:"t"}),(0,a.jsx)(n.mo,{stretchy:"false",children:"]"})]}),(0,a.jsx)(n.annotation,{encoding:"application/x-tex",children:"[T, T + t]"})]})})}),(0,a.jsxs)(n.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(n.span,{className:"base",children:[(0,a.jsx)(n.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsx)(n.span,{className:"mopen",children:"["}),(0,a.jsx)(n.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"T"}),(0,a.jsx)(n.span,{className:"mpunct",children:","}),(0,a.jsx)(n.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsx)(n.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"T"}),(0,a.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,a.jsx)(n.span,{className:"mbin",children:"+"}),(0,a.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,a.jsxs)(n.span,{className:"base",children:[(0,a.jsx)(n.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsx)(n.span,{className:"mord mathnormal",children:"t"}),(0,a.jsx)(n.span,{className:"mclose",children:"]"})]})]})]})," \u671F\u95F4\uFF0C\u53EA\u6709\u5F53\u4E24\u4E2A chunkserver \u526F\u672C\u7684 SSD \u635F\u574F\uFF0C\u5BA2\u6237\u7AEF\u5185\u5B58\u4E2D\u7684\u6700\u540E\u4E00\u4E2A\u526F\u672C\u4E5F\u53D1\u751F\u6545\u969C\u6216\u96C6\u7FA4\u65AD\u7535\u65F6\uFF0C\u624D\u4F1A\u53D1\u751F\u6570\u636E\u4E22\u5931\u3002\u56E0\u4E3A SSD \u7684\u5E74\u6545\u969C\u7387 \uFF08 \u5373 1.5%\u223C1.5% \uFF09 \u548C\u670D\u52A1\u5668\u7684\u5E74\u505C\u673A\u7387\uFF08\u5373 < 2%\uFF09\u5F88\u63A5\u8FD1\uFF0C\u6240\u4EE5\u5F53\u4E24\u4E2A\u526F\u672C\u6210\u529F\u5199\u5165\uFF0C\u7B2C\u4E09\u4E2A\u526F\u672C\u88AB Chasing \u65F6\uFF0C\u6570\u636E\u4E22\u5931\u7684\u6982\u7387\u4E0E\u4E09\u4E2A\u526F\u672C\u90FD\u6210\u529F\u5199\u5165\u65F6\u7684\u6982\u7387\u5927\u81F4\u76F8\u540C\u3002"]}),"\n",(0,a.jsxs)(n.h4,{id:"non-stop-write",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#non-stop-write",children:"#"}),"Non-stop write"]}),"\n",(0,a.jsx)(n.p,{children:"\u53D1\u751F\u6545\u969C\u65F6\uFF0Cclient \u5C01\u5B58\u8FD9\u4E2A chunk\uFF0C\u5411 master \u62A5\u544A\u6210\u529F\u5199\u5165\u7684\u6570\u636E\u957F\u5EA6\uFF0C\u7136\u540E\u4F7F\u7528\u4E00\u4E2A\u65B0\u7684 chunk \u7EE7\u7EED\u5199\u672A\u5B8C\u6210\u7684\u6570\u636E\u3002\u5982\u679C\u5199\u5165\u5BC6\u5C01\u5757\u7684\u6570\u636E\u88AB\u7834\u574F\u4E86\uFF0C\u6211\u4EEC\u4F1A\u4F7F\u7528\u5176\u4ED6\u7684\u526F\u672C\u5728\u540E\u53F0\u6D41\u91CF\u4E2D\u628A\u8FD9\u4E2A\u6570\u636E\u7684\u526F\u672C\u590D\u5236\u5230\u65B0\u7684\u5757\u4E2D\u3002\u5982\u679C\u6CA1\u6709\u526F\u672C\u53EF\u7528\uFF0C\u5BA2\u6237\u7AEF\u4F1A\u5C06\u8FD9\u4E9B\u6570\u636E\u5199\u5230\u65B0\u7684 chunk\u3002"}),"\n",(0,a.jsxs)(n.h4,{id:"backup-read",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#backup-read",children:"#"}),"Backup read"]}),"\n",(0,a.jsx)(n.p,{children:"client \u6536\u5230\u4E4B\u524D\u53D1\u9001\u7684\u8BFB\u53D6\u8BF7\u6C42\u7684\u54CD\u5E94\u524D\uFF0C\u5411\u5176\u4ED6 chunkserver \u53D1\u9001\u989D\u5916\u7684 read \u8BF7\u6C42\u4F5C\u4E3A\u5907\u4EFD\u3002\u4E24\u4E2A\u5173\u952E\u53C2\u6570\uFF1A\u53D1\u9001 backup read request \u7684\u6570\u91CF\u548C\u7B49\u5F85\u65F6\u95F4\u3002\u4E3A\u6B64\uFF0Cpangu \u8BA1\u7B97\u4E86\u4E0D\u540C\u78C1\u76D8\u7C7B\u578B\u548C io \u5927\u5C0F\u7684\u5EF6\u8FDF\uFF08\u53C2\u8003 perseus\uFF09\uFF0C\u5E76\u4E14\u5229\u7528\u8FD9\u4E9B\u4FE1\u606F\u52A8\u6001\u7684\u8C03\u6574\u53D1\u9001 backup read request \u7684\u65F6\u95F4\uFF0C\u5E76\u4E14\u9650\u5236\u4E86\u6570\u91CF\u63A7\u5236\u7CFB\u7EDF\u8D1F\u8F7D\u3002"}),"\n",(0,a.jsxs)(n.h4,{id:"\u9ED1\u540D\u5355",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u9ED1\u540D\u5355",children:"#"}),"\u9ED1\u540D\u5355"]}),"\n",(0,a.jsx)(n.p,{children:"\u4E3A\u4E86\u907F\u514D\u5411\u670D\u52A1\u8D28\u91CF\u5DEE\u7684 chunkserver \u53D1\u9001 io \u8BF7\u6C42\uFF0C\u5F15\u5165\u4E86\u4E24\u4E2A\u9ED1\u540D\u5355\uFF1A\u786E\u5B9A\u6027\u9ED1\u540D\u5355\u548C\u975E\u786E\u5B9A\u6027\u9ED1\u540D\u5355\u3002\u5F53 pangu \u786E\u5B9A\u4E00\u4E2A chunkserver \u65E0\u6CD5\u4F7F\u7528\u65F6\uFF08\u4F8B\u5982 SSD \u635F\u574F\uFF09\uFF0C\u8FD9\u4E2A\u670D\u52A1\u5668\u6DFB\u52A0\u5230\u786E\u5B9A\u6027\u9ED1\u540D\u5355\u4E2D\u3002\u5982\u679C\u4E00\u4E2A chunkserver \u53EF\u4EE5\u63D0\u4F9B\u670D\u52A1\uFF0C\u5EF6\u8FDF\u8D85\u8FC7\u4E86\u4E00\u5B9A\u7684\u9608\u503C\uFF0C\u6DFB\u52A0\u5230\u975E\u786E\u5B9A\u6027\u9ED1\u540D\u5355\u4E2D\uFF0C\u5176\u6982\u7387\u968F\u7740\u670D\u52A1\u5EF6\u8FDF\u7684\u589E\u52A0\u800C\u589E\u52A0\u3002\u5982\u679C\u8BE5\u670D\u52A1\u5668\u7684\u5EF6\u8FDF\u8D85\u8FC7\u6240\u6709\u670D\u52A1\u5668\u7684\u5EF6\u8FDF\u7684\u4E2D\u4F4D\u6570\u6570\u500D\uFF0C\u4F1A\u88AB\u76F4\u63A5\u6DFB\u52A0\u5230\u975E\u786E\u5B9A\u6027\u9ED1\u540D\u5355\u4E2D\uFF0C\u6982\u7387\u4E3A 1\u3002\u4E3A\u4E86\u4ECE\u9ED1\u540D\u5355\u4E2D\u91CA\u653E chunkserver\uFF0C\u5BA2\u6237\u7AEF\u5B9A\u671F\uFF08\u6BD4\u5982\u6BCF\u79D2\uFF09\u5411\u8FD9\u4E9B\u670D\u52A1\u5668\u53D1\u9001 io \u8FDB\u884C\u63A2\u6D4B\u3002\u5982\u679C\u786E\u5B9A\u6027\u9ED1\u540D\u5355\u4E0A\u7684\u670D\u52A1\u5668\u6210\u529F\u8FD4\u56DE\u8BF7\u6C42\u7684\u54CD\u5E94\uFF0C\u4F1A\u4ECE\u9ED1\u540D\u5355\u4E2D\u79FB\u9664\u3002\u5982\u679C\u662F\u975E\u786E\u5B9A\u6027\u9ED1\u540D\u5355\uFF0C\u6839\u636E\u54CD\u5E94\u7684\u65F6\u95F4\u6765\u8FDB\u884C\u51B3\u7B56\u3002\npangu \u9650\u5236\u4E86\u9ED1\u540D\u5355\u7684\u670D\u52A1\u5668\u603B\u6570\uFF0C\u4EE5\u786E\u4FDD\u7CFB\u7EDF\u7684\u53EF\u7528\u6027\uFF0C\u6BCF\u4E2A chunkserver \u5F15\u5165\u4E00\u4E2A\u5BBD\u9650\u671F\u3002\u4E3A tcp \u94FE\u8DEF\u548C rdma \u94FE\u8DEF\u5206\u522B\u7EF4\u62A4\u9ED1\u540D\u5355\uFF0C\u5206\u522B\u8FDB\u884C\u63A2\u6D4B\u3002"}),"\n",(0,a.jsxs)(n.h3,{id:"\u8BC4\u4F30",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u8BC4\u4F30",children:"#"}),"\u8BC4\u4F30"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"/assets/Pasted%20image%2020230425221321.png",alt:""})}),"\n",(0,a.jsxs)(n.h2,{id:"\u9636\u6BB5\u4E8C\u9002\u5E94\u6027\u80FD\u5BFC\u5411\u7684\u5546\u4E1A\u6A21\u5F0F",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u9636\u6BB5\u4E8C\u9002\u5E94\u6027\u80FD\u5BFC\u5411\u7684\u5546\u4E1A\u6A21\u5F0F",children:"#"}),"\u9636\u6BB5\u4E8C\uFF1A\u9002\u5E94\u6027\u80FD\u5BFC\u5411\u7684\u5546\u4E1A\u6A21\u5F0F"]}),"\n",(0,a.jsx)(n.p,{children:"\u5355\u53F0 taishan \u670D\u52A1\u5668\u7684 SSD \u541E\u5410\u91CF\u53EF\u4EE5\u8FBE\u5230 20GB/s \u4EE5\u4E0A\u3002\u6709\u4E86\u8FD9\u6837\u9AD8\u6027\u80FD\u7684\u5B58\u50A8\uFF0C\u81EA\u7136\u4F1A\u89C2\u5BDF\u5230\u5176\u4ED6\u7684\u8D44\u6E90\uFF08\u7F51\u7EDC\u3001\u5185\u5B58\u3001 CPU\uFF09\u6210\u4E3A pangu \u7684\u5B58\u50A8\u74F6\u9888\u3002\u56E0\u6B64\u8FDB\u884C\u4E86\u7F51\u7EDC\u7684\u5347\u7EA7\uFF0825 Gbps->100 Gbps\uFF09\u3002"}),"\n",(0,a.jsxs)(n.h3,{id:"\u7F51\u7EDC\u74F6\u9888",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u7F51\u7EDC\u74F6\u9888",children:"#"}),"\u7F51\u7EDC\u74F6\u9888"]}),"\n",(0,a.jsx)(n.p,{children:"\u5E26\u5BBD\u6269\u5C55\u3002\u4E00\u5F00\u59CB\u4F7F\u7528 lossless rdma\u3002\u5F53 rdma \u4E2D\u6709\u592A\u591A\u7684\u6682\u505C\u5E27\u65F6\uFF0C\u5173\u95ED nic \u7AEF\u53E3\u6216\u8005\u5728\u51E0\u79D2\u949F\u5185\u4ECE rdma \u5207\u6362\u5230 tcp\u3002\u7136\u800C\u8FD9\u4E9B\u673A\u5236\u4E0D\u80FD\u5904\u7406\u57FA\u4E8E\u6682\u505C\u5E27\u7684\u5176\u4ED6\u95EE\u9898\uFF08deadlock\u3001head-of-line blocking\uFF09\u3002\u540E\u6765\u5347\u7EA7\u5230 lossy rdma\uFF0C\u7981\u7528\u6682\u505C\u5E27\uFF0C\u907F\u514D\u8FD9\u4E9B\u95EE\u9898\u3002"}),"\n",(0,a.jsx)(n.p,{children:"\u6D41\u91CF\u4F18\u5316\u3002\u964D\u4F4E\u6D41\u91CF\u653E\u5927\u7387\uFF1AEC \u548C\u6570\u636E\u538B\u7F29\u3002\n\u4F7F\u7528 EC \u66FF\u4EE3\u4E09\u526F\u672C\u7684\u6280\u672F\u6311\u6218\uFF1A\u5728 EC \u4E2D\u5B58\u50A8\u5C0F\u6587\u4EF6\u662F\u5F88\u6602\u8D35\u7684\uFF0C\u56E0\u4E3A\u5728\u5177\u6709\u56FA\u5B9A\u957F\u5EA6\u7684\u6570\u636E\u4E0A\u6267\u884C EC \u9700\u8981\u5927\u91CF\u7684 zero padding\u3002\u5F15\u5165\u4E86\u673A\u5236\u907F\u514D\uFF1A\u5C0F\u5199\u8BF7\u6C42\u805A\u5408\uFF0CEC \u548C\u4E09\u526F\u672C\u52A8\u6001\u5207\u6362\u3002\u4F7F\u7528 Intel ISA-L \u907F\u514D EC \u8BA1\u7B97\u5EF6\u8FDF\u3002\u7F51\u7EDC\u6D41\u91CF\u653E\u5927\u7387\u53EF\u4EE5\u4ECE 6.375 \u500D\u51CF\u5C11\u5230 4.875 \u500D\u3002\n\u538B\u7F29 FlatLogFile\uFF1Aclient \u548C GCworker \u5199\u6587\u4EF6\u524D\u90FD\u4F1A\u8FDB\u884C\u538B\u7F29\u3002\u4F7F\u7528 LZ4 \u7B97\u6CD5\uFF0C\u5E73\u5747\u538B\u7F29\u7387\u8FBE\u5230 50%\u3002\u56E0\u6B64\uFF0C\u6D41\u91CF\u653E\u5927\u7387\u53EF\u4EE5\u4ECE 4.875 \u500D\u8FDB\u4E00\u6B65\u964D\u4F4E\u5230 2.9375 \u500D"}),"\n",(0,a.jsx)(n.p,{children:"\u524D\u53F0\u6D41\u91CF\u548C\u540E\u53F0\u6D41\u91CF\u7684\u52A8\u6001\u5E26\u5BBD\u5206\u914D\u3002\u4F8B\u5982\uFF0C\u5982\u679C\u6574\u4E2A\u5B58\u50A8\u96C6\u7FA4\u6709\u8DB3\u591F\u7684\u7A7A\u95F2\u7A7A\u95F4\uFF0C\u6211\u4EEC\u4F1A\u5728\u65F6\u95F4\u4E0A\u964D\u4F4E\u9608\u503C\uFF0C\u9650\u5236\u540E\u53F0\u6D41\u91CF\uFF08\u5982 GC \u6D41\u91CF\uFF09\u7684\u5E26\u5BBD\uFF0C\u800C\u8BA9\u524D\u53F0\u6D41\u91CF\u4F7F\u7528\u66F4\n\u591A\u7684\u5E26\u5BBD\u3002\u5BF9\u4E8E\u6DD8\u5B9D\u7F51\uFF0C\u76D8\u53E4\u5728\u767D\u5929\u5230\u5348\u591C\u8BBE\u7F6E\u4E86\u4E00\u4E2A\u4F4E\u9608\u503C\uFF0C\u4EE5\u5E94\u5BF9\u5927\u91CF\u7684\u524D\u7AEF\u8BBF\u95EE\u8BF7\u6C42\u3002\u5348\u591C\u8FC7\u540E\uFF0C\u76D8\u53E4\u589E\u52A0\u4E86\u95E8\u69DB\uFF0C\u56E0\u4E3A\u524D\u53F0\u7684\u6D41\u91CF\u51CF\u5C11\u4E86\u3002"}),"\n",(0,a.jsxs)(n.h3,{id:"\u5185\u5B58\u74F6\u9888",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u5185\u5B58\u74F6\u9888",children:"#"}),"\u5185\u5B58\u74F6\u9888"]}),"\n",(0,a.jsx)(n.p,{children:"\u76D8\u53E4\u7684\u57FA\u672C\u5185\u5B58\u74F6\u9888\u5728\u4E8E\u7F51\u7EDC\u8FDB\u7A0B\uFF08\u5373\u6267\u884C DMA \u64CD\u4F5C\u7684\u7F51\u5361\uFF09\u548C\u63A5\u6536\u4E3B\u673A\u4E2D\u7684\u5E94\u7528\u8FDB\u7A0B\uFF08\u5982\u6570\u636E\u590D\u5236\u3001\u6570\u636E\u590D\u5236\u548C\u5783\u573E\u56DE\u6536\uFF09\u4E4B\u95F4\u5BF9\u5185\u5B58\u5E26\u5BBD\u7684\u9AD8\u5EA6\u4E89\u593A\u3002\n\u7531\u4E8E NIC \u65E0\u6CD5\u83B7\u5F97\u8DB3\u591F\u7684\u5185\u5B58\u5E26\u5BBD\uFF0C\u56E0\u6B64\u5BF9 NIC \u4EA7\u751F\u4E86\u4E25\u91CD\u7684 PCIe \u80CC\u538B\u3002\u56E0\u6B64\uFF0CNIC \u7684\u7F13\u51B2\u533A\u88AB\u98DE\u884C\u4E2D\u7684\u6570\u636E\u5305\u586B\u6EE1\u3002\u6700\u7EC8\uFF0C\u5B83\u4E22\u5F03\u4E86\u6EA2\u51FA\u7684\u6570\u636E\u5305\uFF0C\u89E6\u53D1\u4E86\u7F51\u7EDC\u4E2D\u7684\u62E5\n\u5835\u63A7\u5236\u673A\u5236\uFF0C\u5BFC\u81F4\u6574\u4F53\u6027\u80FD\u4E0B\u964D\uFF08\u4F8B\u5982\uFF0C\u6BCF\u53F0\u670D\u52A1\u5668\u7684\u7F51\u7EDC\u541E\u5410\u91CF\u4E0B\u964D 30% \uFF0C\u5EF6\u8FDF\u589E\u52A0 5%-10% \uFF0C IOPS \u4E0B\u964D10%\uFF09\u3002\u8FD9\u79CD\u73B0\u8C61\u5E76\u4E0D\u662F\u76D8\u53E4\u72EC\u6709\u7684\u3002\u8C37\u6B4C\u6700\u8FD1\u4E5F\u62A5\u9053\n\u4E86\u8FD9\u4E2A\u95EE\u9898\u3002\n\u4E09\u6B65\u8D70\u89E3\u51B3\u8FD9\u4E2A\u95EE\u9898\uFF1A"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"\u5145\u5206\u5229\u7528\u5185\u5B58\u901A\u9053"}),"\n",(0,a.jsx)(n.li,{children:"\u540E\u53F0\u6D41\u91CF\u4ECE TCP \u5207\u6362\u5230 RDMA"}),"\n",(0,a.jsx)(n.li,{children:"\u8FDC\u7A0B\u76F4\u63A5\u7F13\u5B58\u8BBF\u95EE\uFF08RDCA\uFF09\uFF0C\u53D1\u9001\u65B9\u76F4\u63A5\u8BBF\u95EE\u63A5\u6536\u65B9\u7684\u7F13\u5B58\u3002"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"\u5C0F\u5BB9\u91CF DRAM\u3002\u6211\u4EEC\u5728\u670D\u52A1\u5668\u4E0A\u589E\u52A0\u4E86\u66F4\u591A\u5C0F\u5BB9\u91CF\u7684 DRAM\uFF08\u4F8B\u5982 16 GB\uFF09\uFF0C\u5145\u5206\u5229\u7528\u5185\u5B58\u901A\u9053\u3002\u542F\u7528 NUMA\uFF0C\u907F\u514D\u8DE8 socket \u5185\u5B58\u8BBF\u95EE[[\u5B66\u4E60/Ultra path interconnect]]\u3002\n\u540E\u53F0\u6D41\u91CF\u4ECE TCP \u5207\u6362\u5230 RDMA\u3002TCP \u6BD4 RDMA \u81F3\u5C11\u591A 4 \u6B21 memcpy\u3002\u5207\u6362\u540E\uFF0C\u540E\u53F0\u6D41\u91CF\u7684\u5185\u5B58\u5E26\u5BBD\u6D88\u8017\u964D\u4F4E\u4E86 75%\u3002\u4E3A\u4E86\u4FDD\u8BC1\u524D\u53F0\u6D41\u91CF\u7684 QoS\uFF0C\u8BBE\u8BA1\u4E86\u4E00\u4E2A\u7C7B\u4F3C Linux tc \u7684\u673A\u5236\u63A7\u5236\u80CC\u666F\u6D41\u91CF\u3002"}),"\n",(0,a.jsx)(n.p,{children:"\u8FDC\u7A0B\u76F4\u63A5\u7F13\u5B58\u8BBF\u95EE\u3002\u53D1\u9001\u65B9\u7ED5\u8FC7\u63A5\u6536\u65B9\u7684\u5185\u5B58\uFF0C\u76F4\u63A5\u8BBF\u95EE\u5176\u7F13\u5B58\u3002\n\u5728\u76D8\u53E4\u7684\u751F\u4EA7\u5DE5\u4F5C\u8D1F\u8F7D\u4E2D\uFF0C\u6211\u4EEC\u89C2\u5BDF\u5230\u4E00\u4E2A\u91CD\u8981\u7684\u73B0\u8C61\uFF1A\u6570\u636E\u79BB\u5F00\u7F51\u5361\u540E\u5728\u5185\u5B58\u4E2D\u505C\u7559\u7684\u65F6\u95F4\u975E\u5E38\u77ED\uFF08\u5373\u5E73\u5747\u6570\u767E\u5FAE\u79D2\uFF09\u3002\u5047\u8BBE\u7F51\u5361\u79BB\u5F00\u540E\u7684\u5E73\u5747\u65F6\u95F4\u4E3A 200 us\uFF0C\u5BF9\u4E8E\u4E00\u4E2A\u53CC\u7AEF\u53E3\u7684 100 Gbps \u7F51\u5361\uFF0C\u6211\u4EEC\u53EA\u9700\u8981 5 MB \u7684\u65F6\u95F4\u6765\u5B58\u50A8\u79BB\u5F00\u7F51\u5361\u7684\u6570\u636E\n\u4E09\u4E2A\u7EC4\u4EF6\uFF1A"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"\u7F13\u5B58\u9A7B\u7559\u7684\u7F13\u51B2\u6C60\u3002\u8BE5\u6C60\u4F7F\u7528\u5171\u4EAB\u63A5\u6536\u961F\u5217\uFF08SRQ\uFF09\u6765\u63A5\u6536\u5C0F\u6D88\u606F\uFF0C\u5E76\u4F7F\u7528\u914D\u5907\u6709\u57FA\u4E8E\u7A97\u53E3\u7684\u901F\u7387\u63A7\u5236\u673A\u5236\u7684 READ \u7F13\u51B2\u533A\u6765\u63A5\u6536\u5927\u6D88\u606F\uFF0C\u8FD9\u6837\uFF0CRDMA \u64CD\u4F5C\u6240\u9700\u7684\u5185\u5B58\u7F13\u51B2\u533A\u5C31\u53EF\u4EE5\u653E\u5165\u7F13\u5B58\u3002"}),"\n",(0,a.jsx)(n.li,{children:"\u8FC5\u901F\u7684\u7F13\u5B58\u56DE\u6536\u3002\u4E3A\u4E86\u652F\u6301 100-Gbps NIC \u4EE5\u5C3D\u53EF\u80FD\u5C11\u7684 LLC \u8FD0\u884C\uFF0C\u6211\u4EEC\u8BBE\u8BA1\u4E86 swift \u7F13\u5B58\u56DE\u6536\u673A\u5236\uFF0C\u901A\u8FC7\uFF081\uFF09\u6CBF\u7BA1\u9053\u5E76\u884C\u5904\u7406\u6570\u636E\uFF0C\u4EE5\u53CA\uFF082\uFF09\u4F7F\u7528\u786C\u4EF6\u5378\u8F7D\u548C\u8F7B\u91CF\u7EA7\uFF08\u975E\uFF09\u5E8F\u5217\u5316\u4F18\u5316\u5904\u7406\uFF0C\u51CF\u5C11\u6570\u636E\u5728 NIC \u540E\u7684\u65F6\u95F4\u8DE8\u5EA6\u3002"}),"\n",(0,a.jsx)(n.li,{children:"\u7F13\u5B58\u538B\u529B\u610F\u8BC6\u7684\u9003\u907F\u673A\u5236\u3002\u4E3A\u4E86\u5904\u7406\u5076\u5C14\u7684\u6296\u52A8\uFF08\u4F8B\u5982\u3001SSD \u6162\u901F\u5199\u5165\u548C\u5E94\u7528\u5F02\u5E38\uFF09\uFF0C\u9003\u9038\u673A\u5236\u76D1\u63A7\u4FDD\u7559\u7684 LLC \u7684\u4F7F\u7528\u60C5\u51B5\uFF0C\u5E76\u91C7\u53D6\u76F8\u5E94\u7684\u884C\u52A8\uFF0C\u5305\u62EC\uFF081\uFF09\u901A\u8FC7\u5411\u9A7B\u7F13\u5B58\u7684\u7F13\u51B2\u6C60\u6DFB\u52A0\u65B0\u7684\u7F13\u51B2\u533A\u6765\u66FF\u6362\u6EDE\u7559\u6570\u636E\u7684\u7F13\u5B58\u7F13\u51B2\u533A\uFF0C\u8FD9\u6837 RDCA \u4E2D\u80FD\u591F\u5BB9\u7EB3\u65B0\u5230\u8BF7\u6C42\u7684\u53EF\u7528\u7F13\u5B58\u7684\u5927\u5C0F\u4FDD\u6301\u4E0D\u53D8\uFF1B\uFF082\uFF09\u5982\u679C\u53D1\u751F\u592A\u591A\u7684\u66FF\u6362\uFF0C\u4E3B\u52A8\u5C06\u8FD0\u884C\u7F13\u6162\u7684\u5E94\u7528\u7684\u6570\u636E\u590D\u5236\u5230\u5185\u5B58\uFF0C\u8FD9\u6837\u5176\u4ED6\u5E94\u7528\u53EF\u4EE5\u4F7F\u7528 RDCA \u7684\u7F13\u51B2\u6C60\uFF0C\u5E76\u4E14\u8BE5\u6C60\u4E0D\u4F1A\u5360\u7528\u592A\u591A\u7684\u7F13\u5B58\uFF1B\u548C (3) \u8BA9 NIC \u5728\u62E5\u585E\u901A\u77E5\u6570\u636E\u5305\u4E2D\u6807\u8BB0\u663E\u5F0F\u62E5\u585E\u901A\u77E5 (ECN)\uFF0C\u4EE5\u4FBF\u5728\u590D\u5236\u5230\u5185\u5B58\u5931\u8D25\u6216\u4E0D\u8DB3\u4EE5\u91CA\u653E\u7F13\u5B58\u538B\u529B\u65F6\u8868\u793A\u62E5\u585E\u3002\n\u5229\u7528 Intel DDIO \u5B9E\u73B0\u4E86 RDCA\u3002\n\u5BF9\u4E8E\u5178\u578B\u7684\u5B58\u50A8\u5DE5\u4F5C\u8D1F\u8F7D\uFF0CRDCA \u5728\u6BCF\u53F0\u670D\u52A1\u5668\u4E0A\u6D88\u8017\u4E86 12 MB \u7684 LLC \u7F13\u5B58\uFF08\u5360\u603B\u7F13\u5B58\u7684 20%\uFF09\uFF0C\u964D\u4F4E\u4E86\u5E73\u5747\u5185\u5B58\u5E26\u5BBD\u6D88\u8017\u91CF\u51CF\u5C11\u4E86 89%\uFF0C\u7F51\u7EDC\u541E\u5410\u91CF\u63D0\u9AD8\u4E86 9%\u3002\n\u6211\u4EEC\u53D1\u73B0\uFF0CRDCA \u5728\u975E\u5B58\u50A8\u5DE5\u4F5C\u8D1F\u8F7D\u4E2D\u4E5F\u5F88\u6709\u6548\uFF0C\u4F8B\u5982\uFF0C\u5B83\u51CF\u5C11\u4E86\u96C6\u4F53\u7684\u5E73\u5747\u5EF6\u8FDF\u3002\u5728\u5BF9\u5EF6\u8FDF\u654F\u611F\u7684 HPC \u5E94\u7528\u4E2D\uFF0C\u901A\u4FE1\u901F\u5EA6\u63D0\u9AD8\u4E86\uFF0C\u8FBE\u523035.1%\u3002RDCA \u4E8E 2022 \u5E74\u5E95\u5728\u76D8\u53E4\u4E2D\u63A8\u51FA\u3002"}),"\n"]}),"\n",(0,a.jsxs)(n.h3,{id:"cpu-\u74F6\u9888",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#cpu-\u74F6\u9888",children:"#"}),"CPU \u74F6\u9888"]}),"\n",(0,a.jsx)(n.p,{children:"\u5373\u4F7F\u901A\u8FC7\u4F18\u5316\u6765\u6253\u7834\u7F51\u7EDC\u548C\u5185\u5B58\u74F6\u9888\uFF0C\u76D8\u53E4\u5728 100 Gbps \u7F51\u7EDC\u4E2D\u7684\u541E\u5410\u91CF\u4ECD\u7136\u53EA\u80FD\u8FBE\u5230\u5176\u7406\u8BBA\u503C\u7684 80% \u3002\u8FD9\u662F\u56E0\u4E3A\u6570\u636E\u5E8F\u5217\u5316\u548C\u53CD\u5E8F\u5217\u5316\u3001\u6570\u636E\u538B\u7F29\u548C\u6570\u636E CRC \u8BA1\u7B97\u7B49\u64CD\u4F5C\u4F1A\u6D88\u8017\u5F88\u591A CPU \u8D44\u6E90\uFF0C\u4F7F CPU \u6210\u4E3A\u76D8\u53E4\u7684\u53E6\u4E00\u4E2A\u74F6\u9888\u3002"}),"\n",(0,a.jsx)(n.p,{children:"\u6DF7\u5408 RPC\u3002protobuf \u5BF9 RPC \u8BF7\u6C42\u8FDB\u884C\u5E8F\u5217\u5316\u53CD\u5E8F\u5217\u5316\uFF0C\u82B1\u8D39\u5927\u7EA6 30% CPU\uFF0C\u4E3B\u8981\u53D1\u751F\u5728\u5C11\u6570 RPC \u7C7B\u578B\u7684\u6570\u636E\u8DEF\u5F84\u4E0A\u3002\u6570\u636E\u9762\u7528 flatbuffer \u539F\u59CB\u7ED3\u6784\u76F4\u63A5\u53D1\u9001\u63A5\u6536\uFF0C\u4E0D\u8FDB\u884C\u5E8F\u5217\u5316\u3002\u63A7\u5236\u9762\u7EE7\u7EED\u7528 protobuf\u3002\u6BCF\u4E2A CPU \u6838\u5FC3\u7684\u7F51\u7EDC\u541E\u5410\u91CF\uFF0C\u589E\u52A0\u4E86\u7EA6 59%"}),"\n",(0,a.jsx)(n.p,{children:"\u4F7F\u7528 CPU wait \u652F\u6301\u8D85\u7EBF\u7A0B\u3002\u6700\u521D\u6CA1\u6709\u5F00\u542F\u8D85\u7EBF\u7A0B\uFF0C\u968F\u7740 CPU \u6838\u5FC3\u7684\u7A00\u7F3A\uFF0C\u5F00\u59CB\u91C7\u7528\u3002\u8D85\u7EBF\u7A0B\u4E24\u4E2A\u6027\u80FD\u95EE\u9898\uFF1A"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"\u540C\u4E00\u4E2A\u7269\u7406\u6838\u5FC3\u4E0A\u7684\u8D85\u7EBF\u7A0B\u9700\u8981\u5207\u6362\u4E0A\u4E0B\u6587\u3002"}),"\n",(0,a.jsxs)(n.li,{children:["\u4E00\u4E2A ht \u6267\u884C\u4EFB\u52A1\u5F71\u54CD\u53E6\u4E00\u4E2A ht\uFF0C\u9020\u6210\u4E24\u4E2A\u4EFB\u52A1\u7684\u5EF6\u8FDF\u589E\u52A0\u3002\u6BD4\u5982\u4E00\u4E2A network idle-polling thread \u5728\u4E00\u4E2A ht \u4E0A\u6267\u884C\uFF0C\u53E6\u4E00\u4E2A ht \u8DD1 lz4 \u538B\u7F29\uFF0C\u4E0E\u538B\u7F29\u7EBF\u7A0B\u5B8C\u5168\u5360\u636E\u7269\u7406\u6838\u5FC3\u7684\u60C5\u51B5\u76F8\u6BD4\uFF0C\u6570\u636E\u538B\u7F29\u7684\u5EF6\u8FDF\u589E\u52A0 25%\u3002\n\u5F15\u5165 CPU wait \u6307\u4EE4\uFF0C\u7531 ",(0,a.jsx)(n.code,{children:"monitor"})," \u548C ",(0,a.jsx)(n.code,{children:"mwait"})," \u7EC4\u6210\uFF0C\u9700\u8981\u5C11\u4E8E 5 ms \u8FDB\u884C\u8C03\u7528\u3002\u5F15\u5165 CPU \u7B49\u5F85\u540E\uFF0Cnetwork idle-polling thread \u4F1A\u5728\u88AB\u76D1\u63A7\u7684\u5185\u5B58\u5730\u5740\u5904\u7B49\u5F85\uFF0C\u76F4\u5230\u8BE5\u5185\u5B58\u5730\u5740\u88AB\u5176\u4ED6\u7EBF\u7A0B\u5199\u5165\u65F6\u624D\u4F1A\u88AB\u5524\u9192\u3002\u5728 ",(0,a.jsx)(n.code,{children:"mwait"})," \u8FC7\u7A0B\u4E2D\uFF0C\u5B83\u6240\u8FD0\u884C\u7684 HT \u8FDB\u5165\u7A7A\u95F2\u7761\u7720\u72B6\u6001\uFF0C\u8FD9\u662F C0 \u4EE5\u5916\u7684 C \u72B6\u6001\u4E4B\u4E00\uFF0C\u4E0D\u4F1A\u5E72\u6270\u5176\u4ED6 HT\u3002\u6B64\u5916\uFF0C\u7528\u7CFB\u7EDF\u8C03\u7528\u5524\u9192 HT \u7684\u65F6\u95F4\u662F ms \u7EA7\u7684\u3002\u4E0E\u6CA1\u6709 wait \u76F8\u6BD4\uFF0C\u7F51\u7EDC\u541E\u5410\u91CF\u589E\u52A0\u4E8631.6%\u3002"]}),"\n"]}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.code,{children:"monitor"})," \u548C ",(0,a.jsx)(n.code,{children:"mwait"})," \u662F\u4E00\u5BF9 x86\u6307\u4EE4\u96C6\u67B6\u6784\u4E2D\u7684\u6307\u4EE4\uFF0C\u5B83\u4EEC\u4E3B\u8981\u7528\u4E8E\u652F\u6301\u5904\u7406\u5668\u7684\u8D85\u7EBF\u7A0B\u6280\u672F\u3002\u8D85\u7EBF\u7A0B\u6280\u672F\u5141\u8BB8\u4E00\u4E2A\u7269\u7406\u6838\u5FC3\u6A21\u62DF\u4E24\u4E2A\u6216\u66F4\u591A\u7684\u903B\u8F91\u5904\u7406\u5668\uFF0C\u4ECE\u800C\u63D0\u9AD8\u5904\u7406\u5668\u7684\u8D44\u6E90\u5229\u7528\u7387\uFF0C\u4F7F\u5176\u80FD\u591F\u5728\u540C\u4E00\u65F6\u95F4\u5904\u7406\u66F4\u591A\u7684\u7EBF\u7A0B\u3002"]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.code,{children:"monitor"})," \u548C ",(0,a.jsx)(n.code,{children:"mwait"})," \u6307\u4EE4\u7684\u4F5C\u7528\u662F\u5728\u67D0\u79CD\u7A0B\u5EA6\u4E0A\u63D0\u9AD8\u5904\u7406\u5668\u7684\u80FD\u6548\u6BD4\uFF0C\u5B83\u4EEC\u5141\u8BB8\u5904\u7406\u5668\u5728\u7B49\u5F85\u67D0\u4E2A\u7279\u5B9A\u5185\u5B58\u5730\u5740\u7684\u503C\u53D1\u751F\u6539\u53D8\u65F6\u8FDB\u5165\u4F4E\u529F\u8017\u72B6\u6001\u3002\u8FD9\u53EF\u4EE5\u5728\u4E00\u4E9B\u591A\u7EBF\u7A0B\u7F16\u7A0B\u573A\u666F\u4E2D\u8282\u7701\u80FD\u6E90\uFF0C\u4F8B\u5982\u540C\u6B65\u539F\u8BED\uFF08\u5982\u81EA\u65CB\u9501\uFF09\u548C\u5176\u4ED6\u7EBF\u7A0B\u95F4\u901A\u4FE1\u673A\u5236\u3002"]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.code,{children:"monitor"})," \u6307\u4EE4\u7528\u4E8E\u8BBE\u7F6E\u4E00\u4E2A\u76D1\u89C6\u533A\u57DF\uFF0C\u5373\u4E00\u4E2A\u7279\u5B9A\u7684\u5185\u5B58\u5730\u5740\u8303\u56F4\u3002\u5F53\u5904\u7406\u5668\u6267\u884C ",(0,a.jsx)(n.code,{children:"monitor"})," \u6307\u4EE4\u65F6\uFF0C\u5B83\u4F1A\u76D1\u89C6\u6307\u5B9A\u7684\u5185\u5B58\u5730\u5740\uFF0C\u4EE5\u68C0\u6D4B\u8BE5\u5730\u5740\u7684\u503C\u662F\u5426\u53D1\u751F\u53D8\u5316\u3002"]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.code,{children:"mwait"}),"\u6307\u4EE4\u7528\u4E8E\u8BA9\u5904\u7406\u5668\u8FDB\u5165\u4E00\u79CD\u4F4E\u529F\u8017\u72B6\u6001\uFF0C\u79F0\u4E3A\u201C\u7761\u7720\u201D\u72B6\u6001\u3002\u5728\u8FD9\u79CD\u72B6\u6001\u4E0B\uFF0C\u5904\u7406\u5668\u4F1A\u6682\u505C\u6267\u884C\uFF0C\u7B49\u5F85\u6307\u5B9A\u5185\u5B58\u5730\u5740\u7684\u503C\u53D1\u751F\u53D8\u5316\u3002\u5F53\u76D1\u89C6\u7684\u5185\u5B58\u5730\u5740\u53D1\u751F\u53D8\u5316\u65F6\uFF0C\u5904\u7406\u5668\u4F1A\u88AB\u5524\u9192\u5E76\u7EE7\u7EED\u6267\u884C\u3002"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"CRC \u548C\u538B\u7F29\u5378\u8F7D\u5230 FPGA\u3002\u538B\u7F29\u5378\u8F7D\u5230 FPGA \u4E0A\uFF0C3 GB/s \u541E\u5410\u8282\u7EA6 10c\u3002CRC \u8BA1\u7B97\u5378\u8F7D\u5230\u7F51\u5361\u4E0A\u3002CPU \u5BF9\u7F51\u5361\u8BA1\u7B97\u7684 CRC \u8FDB\u884C\u6C47\u603B\u548C\u68C0\u67E5\u3002\u8282\u7EA6 30% CPU \u5F00\u9500\u3002"}),"\n",(0,a.jsxs)(n.h1,{id:"\u8FD0\u8425\u7ECF\u9A8C",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u8FD0\u8425\u7ECF\u9A8C",children:"#"}),"\u8FD0\u8425\u7ECF\u9A8C"]}),"\n",(0,a.jsx)(n.p,{children:"\u7EC6\u7C92\u5EA6\u7684\u76D1\u63A7\u548C\u667A\u80FD\u8BCA\u65AD\u3002\u5728\u76D8\u53E4 2.0 \u4E2D\uFF0C\u6211\u4EEC\u901A\u8FC7\u4E24\u4E2A\u5173\u952E\u8BBE\u8BA1\u6539\u8FDB\u4E86\u76D8\u53E4\u7684\u76D1\u63A7\u7CFB\u7EDF\uFF0C\u4EE5\u6EE1\u8DB3\u9AD8\u6027\u80FD\u7684\u8981\u6C42\uFF08\u5373 100\u03BCs \u7EA7\u7684 I/O \u5EF6\u8FDF\uFF09\u3002\n\u9996\u5148\uFF0C\u6211\u4EEC\u5C06\u76D1\u63A7\u7684\u65F6\u95F4\u7C92\u5EA6\u4ECE 15 \u79D2\u63D0\u9AD8\u5230 1 \u79D2\uFF0C\u5E76\u6269\u5C55\u4E86\u65E5\u5FD7\u670D\u52A1[68]\u6765\u8BBE\u8BA1\u4E00\u4E2A\u6309\u9700\u8FFD\u8E2A\u7684\u7CFB\u7EDF\u3002\u4E0E\u76D8\u53E4 1.0 \u4E2D\u7684\u7C97\u7C92\u5EA6\u76D1\u63A7\u76F8\u6BD4\uFF0C\u8FD9\u4F7F\u5F97\u6211\u4EEC\u53EF\u4EE5\u5728\u6BCF\u4E2A\u6587\u4EF6\u64CD\u4F5C\u7684\u57FA\u7840\u4E0A\u8FDB\u884C\u8FFD\u8E2A\uFF0C\u4EE5\u51C6\u786E\u6355\u6349\u7EC6\u7C92\u5EA6\u7684\u5F02\u5E38\u4E8B\u4EF6\uFF08\u4F8B\u5982\uFF0C\u5185\u5B58\u5206\u914D\u5F02\u5E38\u548C\u65E5\u5FD7\u6253\u5370\u8D85\u65F6\uFF09\u3002\n\u7B2C\u4E8C\uFF0C\u6211\u4EEC\u91C7\u7528\u4EBA\u5DE5\u667A\u80FD\u6765\u66F4\u597D\u5730\u6355\u6349\u5F02\u5E38\u4E8B\u4EF6\u548C\u5176\u6839\u6E90\u4E4B\u95F4\u7684\u56E0\u679C\u5173\u7CFB\u3002\u63A8\u65AD\u51FA\u7684\u6839\u672C\u539F\u56E0\u7531\u8FD0\u8425\u56E2\u961F\u8BC4\u5B9A\uFF0C\u5E76\u53CD\u9988\u7ED9\u8BAD\u7EC3\u6709\u7D20\u7684\u6A21\u578B\u4EE5\u63D0\u9AD8\u5176\u51C6\u786E\u6027\u3002\u8FD9\u79CD\u8BBE\u8BA1\u5927\u5E45\u63D0\u9AD8\u4E86\u8BCA\u65AD\u7684\u51C6\u786E\u6027\uFF0C\u5E76\u51CF\u5C11\u4E86\u6240\u9700\u7684\u4EBA\u5DE5\u52AA\u529B\u3002"}),"\n",(0,a.jsx)(n.p,{children:"\u7AEF\u5230\u7AEF CRC\u3002\u61D2\u5F97\u8BF4\u4E86\u3002\u62DC\u5360\u5EAD\u9519\u8BEF\u3002"}),"\n",(0,a.jsx)(n.p,{children:"USSOS SLA \u6296\u52A8\u3002\u6BD4\u5982 tcmalloc \u8FDB\u5165 global memory allocation \u65F6\uFF08\u6BD4\u5982\u4E00\u4E2A\u65B0\u7EBF\u7A0B\u9700\u8981\u5185\u5B58\uFF09\u6216\u8005 memory organization \u9636\u6BB5\uFF08too many RDMA queue pairs try to reserve high-order memory space\uFF09\uFF0C\u5C31\u4F1A\u53D8\u5F97\u8FC7\u4E8E\u8017\u65F6\u3002\u5F15\u5165\u4E86\u4E00\u4E2A userspace \u5185\u5B58\u5206\u914D\u6C60\uFF0C\u4F18\u5316\u4E86 rdma \u9A71\u52A8\u4F7F\u7528\u533F\u540D\u9875\u3002\u5468\u671F\u6027\u7684\u91CD\u91CF\u7EA7\u4EFB\u52A1\uFF08\u6BD4\u5982\u6253\u5370\u65E5\u5FD7\uFF09\u8F6C\u79FB\u5230\u5F02\u6B65\u7EBF\u7A0B\uFF0C\u907F\u514D\u5F71\u54CD\u6570\u636E\u64CD\u4F5C SLA\u3002\u7B2C\u4E09\uFF0C\u6211\u4EEC\u53D1\u73B0\u5F53\u5185\u5B58\u5360\u7528\u7387\u5F88\u9AD8\u5E76\u4E14 USSOS \u9700\u8981\u6267\u884C\u5185\u5B58\u56DE\u6536\u65F6\uFF0CUSSOS \u7684 CPU \u5229\u7528\u7387\u660E\u663E\u589E\u52A0\u3002\u56E0\u6B64\uFF0C\u6211\u4EEC\u8C03\u6574\u4E86\u5185\u5B58\u91CD\u65B0\u6536\u96C6\u7684\u9608\u503C\uFF0C\u4EE5\u51CF\u5C11 USSOS \u8FDB\u5165\u5185\u5B58\u91CD\u65B0\u6536\u96C6\u7684\u673A\u4F1A\u3002\u6211\u4EEC\u8FD8\u5728\u540E\u53F0\u91CD\u65B0\u6536\u96C6\u5206\u914D\u7ED9\u7F13\u51B2\u533A\u548C\u9AD8\u901F\u7F13\u5B58\u7684\u5185\u5B58\u3002"}),"\n",(0,a.jsx)(n.p,{children:"\u5904\u7406 MCE\uFF08correctable machine check exceptions\uFF09\u63D0\u9AD8\u53EF\u7528\u6027\u3002\u6700\u521D\uFF0CUSSOS\uFF08\xa73.2\uFF09\u53EF\u4EE5\u76D1\u63A7\u8FD9\u79CD\u786C\u4EF6\u6545\u969C\uFF0C\u4F46\u5B83\u4E0D\u80FD\u611F\u77E5\u5185\u6838\u5982\u4F55\u8FC1\u79FB\u7269\u7406\u5185\u5B58\u4EE5\u9694\u79BB\u5F02\u5E38\u3002\u56E0\u6B64\uFF0C\u5F53 USSOS \u8BD5\u56FE\u6839\u636E\u5176\u8FC7\u65F6\u7684\u865A\u62DF-\u7269\u7406\u5185\u5B58\u5730\u5740\u6620\u5C04\u6765\u8BBF\u95EE\u5DF2\u7ECF\u8FC1\u79FB\u7684\u7269\u7406\u5185\u5B58\u65F6\uFF0C\u5C31\u4F1A\u53D1\u751F\u9519\u8BEF\u3002\u4E3A\u6B64\uFF0C\u6211\u4EEC\u5728 USSOS \u7684 MCE \u76D1\u63A7\u5B88\u62A4\u7A0B\u5E8F\u4E2D\u52A0\u5165\u4E86\u4E00\u4E2A\u5904\u7406\u7A0B\u5E8F\u3002\u4E00\u65E6\u53D1\u73B0\u53EF\u7EA0\u6B63\u7684 MCE \u7684\u6570\u91CF\u8D85\u8FC7\u9608\u503C\uFF0C\u4E0E\u4E4B\u76F8\u5173\u7684\u7528\u6237\u7A7A\u95F4\u8FDB\u7A0B\u5C06\u6682\u505C\uFF0C\u8BA9\u5904\u7406\u7A0B\u5E8F\u901A\u77E5\u5185\u6838\u8FC1\u79FB\u5185\u5B58\u3002\u8FC1\u79FB\u4E4B\u540E\uFF0C\u8FDB\u7A0B\u6062\u590D\u5E76\u5728\u8BBF\u95EE\u5185\u5B58\u9875\u4E4B\u524D\u66F4\u65B0\u5176\u6620\u5C04\u8868\u3002\u8FD9\u79CD\u8BBE\u8BA1\u63D0\u9AD8\u4E86\u76D8\u53E4\u7684\u53EF\u7528\u6027\uFF0C\u800C\u6027\u80FD\u7684\u4E0B\u964D\u53EF\u4EE5\u5FFD\u7565\u4E0D\u8BA1\u3002\u4F8B\u5982\uFF0C\u6211\u4EEC\u5728\u4E00\u4E2A 2300 \u53F0\u670D\u52A1\u5668\u7684\u96C6\u7FA4\u4E2D\u89C2\u5BDF\u5230 22 \u5929\u5185 < 330 \u4E2A\u53EF\u7EA0\u6B63\u7684 MCEs\u3002"}),"\n",(0,a.jsx)(n.p,{children:"\u6765\u81EA\u4E0D\u540C\u4F9B\u5E94\u5546\u7684\u5F02\u8D28\u6027\u5185\u5B58\u5E26\u5BBD\u3002\u76D8\u53E4\u90E8\u7F72\u4E86\u6765\u81EA\u4E0D\u540C\u4F9B\u5E94\u5546\u7684\u5185\u5B58\u3002\u6211\u4EEC\u7684\u6D4B\u8BD5\u8868\u660E\uFF0C\u57281:1 \u7684\u5185\u5B58\u8BFB\u5199\u6BD4\u4E0B\uFF0C\u4E09\u4E2A\u4E0D\u540C\u4F9B\u5E94\u5546\u7684 128 GB \u5185\u5B58\u7684\u53EF\u5B9E\u73B0\u5E26\u5BBD\u5206\u522B\u4E3A 94 GB/s \u3001 84 GB/s \u548C 60 GB/s \uFF08 \u537357%\u7684\u5DEE\u5F02\uFF09\u3002\u8FD9\u79CD\u5F02\u8D28\u7684\u5185\u5B58\u5E26\u5BBD\u4F1A\u5BFC\u81F4\u96C6\u7FA4\u7684 \u6027\u80FD\u4E0B\u964D\u3002\u8FD9\u4E00\u89C2\u5BDF\u544A\u8BC9\u6211\u4EEC\u8981\u66F4\u52A0\u5173\u6CE8\u5185\u5B58\u7684\u6027\u80FD\uFF0C\u800C\u4E0D\u662F\u5BB9\u91CF\u3002\u8FD9\u4E5F\u662F\u6211\u4EEC\u6700\u65E9\u53D1\u73B0\u7684\u63A5\u6536\u5668\u4E3B\u673A\u6570\u636E\u901A\u8DEF\u62E5\u5835\u7684\u8BC1\u636E\uFF0C\u4E5F\u662F RDCA\uFF08\xa74.2.3\uFF09\u7684\u76F4\u63A5\u52A8\u673A\u3002"}),"\n",(0,a.jsxs)(n.h1,{id:"\u7ECF\u9A8C\u6559\u8BAD",children:[(0,a.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#\u7ECF\u9A8C\u6559\u8BAD",children:"#"}),"\u7ECF\u9A8C\u6559\u8BAD"]}),"\n",(0,a.jsx)(n.p,{children:"\u9996\u5148\uFF0C\u7528\u6237\u7A7A\u95F4\u7CFB\u7EDF\u7684\u5F00\u53D1\u548C\u64CD\u4F5C\u6BD4\u8F83\u7B80\u5355\u3002\u4F8B\u5982\uFF0C\u6211\u4EEC\u7684\u6570\u636E\u663E\u793A\uFF0C\u5728\u5185\u6838\u7A7A\u95F4\u6587\u4EF6\u7CFB\u7EDF\u4E2D\uFF0C\u4FEE\u590D\u9519\u8BEF\u9700\u8981\u4E24\u4E2A\u6708\u7684\u65F6\u95F4\uFF0C\u4F46\u5728 USSFS \u4E2D\u53EA\u9700\u8981\u51E0\u4E2A\u661F\u671F\u3002\u5728\u7528\u6237\u7A7A\u95F4\u5F00\u53D1\u65B0\u7684\u529F\u80FD\uFF08\u4F8B\u5982\uFF0Czoned namespace\uFF09\u9700\u8981\u66F4\u5C11\u7684\u5F00\u53D1\u4EBA\u5458\u548C\u66F4\u77ED\u7684\u65F6\u95F4\u3002\u6B64\u5916\uFF0C\u76D1\u6D4B\u548C\u8DDF\u8E2A\u7528\u6237\u7A7A\u95F4\u7CFB\u7EDF\u7684\u884C\u4E3A\u5E76\u76F8\u5E94\u5730\u8C03\u6574\u5176\u53C2\u6570\u4E5F\u6BD4\u8F83\u5BB9\u6613\u3002"}),"\n",(0,a.jsx)(n.p,{children:"\u7B2C\u4E8C\uFF0C\u5F00\u53D1\u7528\u6237\u7A7A\u95F4\u7CFB\u7EDF\u5E94\u8BE5\u4ECE\u5185\u6838\u7A7A\u95F4\u7684\u8BBE\u8BA1\u4E2D\u5B66\u4E60\u3002\u7279\u522B\u662F\uFF0C\u4E3A\u4E86\u5EFA\u7ACB\u4E00\u4E2A\u9AD8\u6027\u80FD\u7684 USSOS\uFF0C\u6211\u4EEC\u4E0D\u4EC5\u9700\u8981\u7EDF\u4E00\u5B58\u50A8\u548C\u7F51\u7EDC\u5806\u6808\uFF0C\u8FD8\u9700\u8981\u4E3A\u5185\u5B58\u7BA1\u7406\u3001CPU \u8C03\u5EA6\u548C\u786C\u4EF6\u6545\u969C\u5904\u7406\u8BBE\u8BA1\u7528\u6237\u7A7A\u95F4\u6A21\u5757\u3002\u5185\u6838\u7A7A\u95F4\u5728\u8FD9\u4E9B\u529F\u80FD\u65B9\u9762\u76F8\u5F53\u51FA\u8272\u3002\u56E0\u6B64\uFF0C\u7528\u6237\u7A7A\u95F4\u7CFB\u7EDF\u53EF\u4EE5\u901A\u8FC7\u5411\u5B83\u5B66\u4E60\u800C\u53D7\u76CA\u3002"}),"\n",(0,a.jsx)(n.p,{children:"Pmem\u3002PMem \u6709\u5F88\u591A\u4F18\u70B9\uFF0C\u6BD4\u5982\u5FEB\u901F\u7684\u6570\u636E\u6301\u4E45\u5316\uFF0C\u5BF9 RDMA \u53CB\u597D\uFF0C\u4F4E\u8BFB\u53D6\u5EF6\u8FDF\uFF08PMem \u4E0A 6\xb5s \u5BF9 SSD \u4E0A 80\xb5s\uFF09\uFF0C\u4F4E\u5C3E\u90E8\u5EF6\u8FDF\uFF0C\u4EE5\u53CA\u5BF9\u7F13\u5B58\u53CB\u597D\u3002\u56E0\u6B64\uFF0C\u6211\u4EEC\u5728\u76D8\u53E4\u5F00\u53D1\u4E86\u4E00\u4E2A\u57FA\u4E8E PMem \u7684 30 \u5FAE\u79D2 EBS \u670D\u52A1\u3002\u7136\u800C\uFF0C\u82F1\u7279\u5C14\u51B3\u5B9A\u5173\u95ED\u5176 PMem \u4E1A\u52A1\uFF0C\u8FEB\u4F7F\u6211\u4EEC\u91CD\u65B0\u8003\u8651\u8FD9\u9879\u670D\u52A1\u3002\u5728\u5F00\u53D1\u65B0\u7684\u670D\u52A1\u65F6\uFF0C\u6211\u4EEC\u9700\u8981\u66F4\u5168\u9762\u7684\u8BA1\u5212 \uFF08\u4F8B\u5982\uFF0C\u8003\u8651\u66FF\u4EE3\u6027\u3001\u53EF\u6301\u7EED\u6027\u548C\u6210\u672C\u6743\u8861\uFF09\u3002\u4F46\u6211\u4EEC\u4E50\u89C2\u5730\u8BA4\u4E3A\uFF0C\u65B0\u7684\u5B58\u50A8\u7C7B\u5B58\u50A8\u5668\u5C06\u51FA\u73B0\uFF0C\u5BF9\u8FD9\u4E9B\u95EE\u9898\u6709\u66F4\u597D\u7684\u89E3\u51B3\u65B9\u6848\u3002"}),"\n",(0,a.jsx)(n.p,{children:"\u6574\u4E2A\u786C\u4EF6\u5378\u8F7D\u538B\u7F29\u7684\u5F00\u53D1\u9700\u8981\u4E00\u4E2A 20 \u4EBA\u7684\u56E2\u961F\u82B1\u8D39\u4E24\u5E74\u65F6\u95F4\uFF0C\u671F\u95F4\u6211\u4EEC\u89E3\u51B3\u4E86\u5F88\u591A\u95EE\u9898\uFF0C\u5982 FPGA \u786C\u4EF6\u6210\u672C\uFF0C\u538B\u7F29\u6570\u636E\u7684\u5B8C\u6574\u6027\uFF0C\u4EE5\u53CA\u4E0E\u786C\u4EF6\u4E2D\u5176\u4ED6\u529F\u80FD\u7684\u5171\u5B58\u3002\u6700\u540E\uFF0C\u7ED3\u679C\u7684\u597D\u5904\u5927\u5927\u8D85\u8FC7\u4E86\u8FD9\u4E2A\u6210\u672C\u3002"})]})}function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,i.useMDXComponents)(),e.components);return n?(0,a.jsx)(n,Object.assign({},e,{children:(0,a.jsx)(r,e)})):r(e)}var h=l;l.__RSPRESS_PAGE_META={},l.__RSPRESS_PAGE_META["notes%2Fpaper%2Fpangu.mdx"]={toc:[{id:"\u7B80\u4ECB",text:"\u7B80\u4ECB",depth:2},{id:"\u76D8\u53E4-10\u9762\u5411\u5BB9\u91CF",text:"\u76D8\u53E4 1.0\uFF1A\u9762\u5411\u5BB9\u91CF",depth:3},{id:"\u76D8\u53E4-20",text:"\u76D8\u53E4 2.0",depth:2},{id:"\u7B2C\u4E00\u9636\u6BB5",text:"\u7B2C\u4E00\u9636\u6BB5",depth:3},{id:"\u7B2C\u4E8C\u9636\u6BB5",text:"\u7B2C\u4E8C\u9636\u6BB5",depth:2},{id:"\u5C0F\u7ED3",text:"\u5C0F\u7ED3",depth:2},{id:"\u76D8\u53E4\u7684\u6982\u8FF0",text:"\u76D8\u53E4\u7684\u6982\u8FF0",depth:2},{id:"\u8BBE\u8BA1\u76EE\u6807",text:"\u8BBE\u8BA1\u76EE\u6807",depth:2},{id:"\u9636\u6BB5\u4E00",text:"\u9636\u6BB5\u4E00",depth:2},{id:"append-only-fs",text:"Append-only fs",depth:3},{id:"heavyweight-client",text:"Heavyweight Client",depth:3},{id:"append-only-chunk-\u7BA1\u7406",text:"Append-only chunk \u7BA1\u7406",depth:3},{id:"\u5143\u6570\u636E\u64CD\u4F5C\u4F18\u5316",text:"\u5143\u6570\u636E\u64CD\u4F5C\u4F18\u5316",depth:3},{id:"\u5E76\u884C\u5316",text:"\u5E76\u884C\u5316",depth:4},{id:"chunkserver-ussos",text:"Chunkserver USSOS",depth:3},{id:"\u5185\u5B58\u7BA1\u7406",text:"\u5185\u5B58\u7BA1\u7406",depth:3},{id:"cpu-\u8C03\u5EA6",text:"CPU \u8C03\u5EA6",depth:3},{id:"append-only-ussfs",text:"Append-only USSFS",depth:3},{id:"\u9AD8\u6027\u80FD\u9AD8\u53EF\u7528",text:"\u9AD8\u6027\u80FD\u9AD8\u53EF\u7528",depth:3},{id:"chasing",text:"Chasing",depth:4},{id:"non-stop-write",text:"Non-stop write",depth:4},{id:"backup-read",text:"Backup read",depth:4},{id:"\u9ED1\u540D\u5355",text:"\u9ED1\u540D\u5355",depth:4},{id:"\u8BC4\u4F30",text:"\u8BC4\u4F30",depth:3},{id:"\u9636\u6BB5\u4E8C\u9002\u5E94\u6027\u80FD\u5BFC\u5411\u7684\u5546\u4E1A\u6A21\u5F0F",text:"\u9636\u6BB5\u4E8C\uFF1A\u9002\u5E94\u6027\u80FD\u5BFC\u5411\u7684\u5546\u4E1A\u6A21\u5F0F",depth:2},{id:"\u7F51\u7EDC\u74F6\u9888",text:"\u7F51\u7EDC\u74F6\u9888",depth:3},{id:"\u5185\u5B58\u74F6\u9888",text:"\u5185\u5B58\u74F6\u9888",depth:3},{id:"cpu-\u74F6\u9888",text:"CPU \u74F6\u9888",depth:3}],title:"More Than Capacity: Performance-oriented Evolution of Pangu in Alibaba",frontmatter:{title:"FAST23 Pangu"}}}}]);